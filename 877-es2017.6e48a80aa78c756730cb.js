"use strict";(self.webpackChunkappdemo_ng12=self.webpackChunkappdemo_ng12||[]).push([[877],{5877:function(e,t,i){i.r(t),i.d(t,{NewsEventModule:function(){return Je}});var n=i(2224),r=i(8127),s=i(30),o=i(7112),a=i(5688),c=i(7147),l=i(9803),u=i(1569),d=i(3546),g=i(4376),p=i(1037),h=i(5342);let f=(()=>{class e{constructor(e){this.http=e}getnotifByID(e){return this.http.get(`${p.N.apiUrl}/push-notif/getnotifbyid/${e}`)}getnotiftype(){return this.http.get(`${p.N.apiUrl}/push-notif/getnotiftype`)}}return e.\u0275fac=function(t){return new(t||e)(c.LFG(h.eN))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var T=i(2016);function Z(e,t){1&e&&(c.TgZ(0,"h2",36),c._uU(1,"New Event"),c.qZA())}function A(e,t){1&e&&(c.TgZ(0,"h2",36),c._uU(1,"Edit Event"),c.qZA())}function v(e,t){1&e&&(c.TgZ(0,"div",38),c._uU(1,"*News required"),c.qZA())}function _(e,t){if(1&e&&(c.TgZ(0,"div"),c.YNc(1,v,2,0,"div",37),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngIf",e.f.NEWS.errors.required)}}function m(e,t){1&e&&(c.TgZ(0,"div",38),c._uU(1,"*Start Date required"),c.qZA())}function b(e,t){if(1&e&&(c.TgZ(0,"div"),c.YNc(1,m,2,0,"div",37),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngIf",e.f.START_DATE.errors.required)}}function E(e,t){1&e&&(c.TgZ(0,"div",38),c._uU(1,"*End Date required"),c.qZA())}function N(e,t){if(1&e&&(c.TgZ(0,"div"),c.YNc(1,E,2,0,"div",37),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngIf",e.f.END_DATE.errors.required)}}function I(e,t){1&e&&(c.TgZ(0,"div",38),c._uU(1,"*Description required"),c.qZA())}function q(e,t){if(1&e&&(c.TgZ(0,"div"),c.YNc(1,I,2,0,"div",37),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngIf",e.f.DESCRIPTION.errors.required)}}function w(e,t){1&e&&(c.TgZ(0,"div",38),c._uU(1,"*URL required"),c.qZA())}function S(e,t){if(1&e&&(c.TgZ(0,"div"),c.YNc(1,w,2,0,"div",37),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngIf",e.f.URL.errors.required)}}function y(e,t){1&e&&(c.TgZ(0,"div",44),c._UZ(1,"div",45),c.qZA())}function D(e,t){1&e&&(c.TgZ(0,"div",46),c._uU(1," Image Uploaded Succesfuly!"),c.qZA())}function U(e,t){1&e&&(c.TgZ(0,"div",47),c._uU(1," Image Upload Failed!"),c.qZA())}const C=function(e){return{"background-image":e}};function x(e,t){if(1&e&&(c.TgZ(0,"div",39),c._UZ(1,"div",40),c.YNc(2,y,2,0,"div",41),c.YNc(3,D,2,0,"div",42),c.YNc(4,U,2,0,"div",43),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Gre("img-preview","fail"===e.selectedFile.status?"-error":"",""),c.Q6J("ngStyle",c.VKq(7,C,"url("+e.selectedFile.src+")")),c.xp6(1),c.Q6J("ngIf",e.selectedFile.pending),c.xp6(1),c.Q6J("ngIf","ok"===e.selectedFile.status),c.xp6(1),c.Q6J("ngIf","fail"===e.selectedFile.status)}}function O(e,t){1&e&&(c.TgZ(0,"div",38),c._uU(1,"*Picture required"),c.qZA())}function Y(e,t){if(1&e&&(c.TgZ(0,"div"),c.YNc(1,O,2,0,"div",37),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngIf",e.f.PICTURE.errors.required)}}function k(e,t){if(1&e&&(c.TgZ(0,"option",48),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.s9C("value",e.CATEGORY_NEWS_ID),c.xp6(1),c.Oqu(e.CATEGORY_NEWS_NAME)}}function F(e,t){1&e&&(c.TgZ(0,"div",38),c._uU(1,"*Category required"),c.qZA())}function P(e,t){if(1&e&&(c.TgZ(0,"div"),c.YNc(1,F,2,0,"div",37),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngIf",e.f.CATEGORY_NEWS_ID.errors.required)}}function R(e,t){1&e&&(c.TgZ(0,"div",38),c._uU(1,"*Start Date Notif required"),c.qZA())}function J(e,t){if(1&e&&(c.TgZ(0,"div"),c.YNc(1,R,2,0,"div",37),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("ngIf",e.f.START_DATE_NOTIF.errors.required)}}const M=function(e){return{"is-invalid":e}};function Q(e,t){if(1&e&&(c.TgZ(0,"div",9),c.TgZ(1,"label"),c._uU(2,"Start Date Notif"),c.qZA(),c._UZ(3,"input",49),c.YNc(4,J,2,1,"div",11),c.qZA()),2&e){const e=c.oxw();c.xp6(3),c.Q6J("ngClass",c.VKq(2,M,e.submitted&&e.f.START_DATE_NOTIF.errors)),c.xp6(1),c.Q6J("ngIf",e.submitted&&e.f.START_DATE_NOTIF.errors)}}function W(e,t){1&e&&(c.TgZ(0,"div",38),c._uU(1,"*End Date Notif required"),c.qZA())}function L(e,t){if(1&e&&(c.TgZ(0,"div"),c.YNc(1,W,2,0,"div",37),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("ngIf",e.f.END_DATE_NOTIF.errors.required)}}function V(e,t){if(1&e&&(c.TgZ(0,"div",9),c.TgZ(1,"label"),c._uU(2,"End Date Notif"),c.qZA(),c._UZ(3,"input",50),c.YNc(4,L,2,1,"div",11),c.qZA()),2&e){const e=c.oxw();c.xp6(3),c.Q6J("ngClass",c.VKq(2,M,e.submitted&&e.f.END_DATE_NOTIF.errors)),c.xp6(1),c.Q6J("ngIf",e.submitted&&e.f.END_DATE_NOTIF.errors)}}function B(e,t){if(1&e&&(c.TgZ(0,"option",48),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.s9C("value",e.NOTIF_TYPE_ID),c.xp6(1),c.Oqu(e.NOTIF_TYPE_NAME)}}function G(e,t){1&e&&(c.TgZ(0,"div",38),c._uU(1,"*notif type required"),c.qZA())}function K(e,t){if(1&e&&(c.TgZ(0,"div"),c.YNc(1,G,2,0,"div",37),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("ngIf",e.f.NOTIF_TYPE_ID.errors.required)}}function j(e,t){if(1&e&&(c.TgZ(0,"div",23),c.TgZ(1,"label"),c._uU(2,"Notif Type"),c.qZA(),c.TgZ(3,"div",24),c.TgZ(4,"select",51),c.YNc(5,B,2,2,"option",26),c.qZA(),c.qZA(),c.YNc(6,K,2,1,"div",11),c.qZA()),2&e){const e=c.oxw();c.xp6(4),c.Q6J("ngClass",c.VKq(3,M,e.submitted&&e.f.NOTIF_TYPE_ID.errors)),c.xp6(1),c.Q6J("ngForOf",e.notiftype),c.xp6(1),c.Q6J("ngIf",e.submitted&&e.f.NOTIF_TYPE_ID.errors)}}function z(e,t){1&e&&c._UZ(0,"span")}const H=function(){return{standalone:!0}};class X{constructor(e,t){this.src=e,this.file=t,this.pending=!1,this.status="init"}}let $=(()=>{class e{constructor(e,t,i,n,r,s,o,c,l){this.formBuilder=e,this.route=t,this.router=i,this.newsEventService=n,this.alertService=r,this.datepipe=s,this.imageService=o,this.industryService=c,this.notifService=l,this.subs=new a.Y,this.loading=!1,this.submitted=!1,this.data=null,this.category=null,this.categoryName=null,this.isChecked=null,this.selectedIndustry=null,this.industrylist=null,this.notiftype=null,this.notifdata=null}ngOnInit(){this.id=this.route.snapshot.params.id,this.isAddMode=!this.id,this.form=this.formBuilder.group({NEWS_ID:[0],NEWS:["",r.kI.required],START_DATE:["",r.kI.required],END_DATE:["",r.kI.required],START_DATE_NOTIF:[""],END_DATE_NOTIF:[""],NOTIF_TYPE_ID:[""],DESCRIPTION:["",r.kI.required],URL:["",r.kI.required],PICTURE:["",r.kI.required],ISACTIVE:[!0],CATEGORY_NEWS_ID:["",r.kI.required],CATEGORY_NEWS_NAME:[""],notif:[""],group_news_list:[""]}),this.isAddMode||(this.subs.add(this.newsEventService.getById(this.id).pipe((0,o.P)()).subscribe(e=>{this.form.patchValue(e),this.form.get("START_DATE").setValue(this.datepipe.transform(e.START_DATE,"yyyy-MM-ddThh:mm")),this.form.get("END_DATE").setValue(this.datepipe.transform(e.END_DATE,"yyyy-MM-ddThh:mm"))})),this.subs.add(this.newsEventService.getGroupNews(this.id).subscribe(e=>this.selectedIndustry=e)),this.subs.add(this.notifService.getnotifByID(this.id).subscribe(e=>{this.notifdata=e,this.notifdata.length>0&&(this.isChecked=!0,this.form.get("START_DATE_NOTIF").setValue(this.datepipe.transform(this.notifdata[0].START_DATE_NOTIF,"yyyy-MM-ddThh:mm")),this.form.get("END_DATE_NOTIF").setValue(this.datepipe.transform(this.notifdata[0].END_DATE_NOTIF,"yyyy-MM-ddThh:mm")),this.form.get("NOTIF_TYPE_ID").setValue(this.notifdata[0].NOTIF_TYPE_ID))}))),this.subs.add(this.newsEventService.getcategory().subscribe(e=>this.category=e)),this.subs.add(this.industryService.getlistindustry().subscribe(e=>this.industrylist=e)),this.subs.add(this.notifService.getnotiftype().subscribe(e=>this.notiftype=e))}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.createNewsEvent())}onSuccess(){this.selectedFile.pending=!1,this.selectedFile.status="ok"}onError(){this.selectedFile.pending=!1,this.selectedFile.status="fail",this.selectedFile.src=""}processFile(e){const t=e.files[0],i=new FileReader;this.form.value.PICTURE&&this.imageService.deleteImage(this.form.value.PICTURE).pipe((0,o.P)()).subscribe(),i.addEventListener("load",e=>{this.selectedFile=new X(e.target.result,t),this.imageService.uploadImage(this.selectedFile.file).subscribe(e=>{this.form.get("PICTURE").setValue(e.filename),this.onSuccess()},e=>{this.onError()})}),i.readAsDataURL(t)}onSelectClick(e){this.categoryName=this.category.filter(t=>t.CATEGORY_NEWS_ID==e)[0].CATEGORY_NEWS_NAME,this.form.get("CATEGORY_NEWS_NAME").setValue(this.categoryName)}createNewsEvent(){this.isAddMode||this.isChecked&&this.form.get("notif").setValue({NOTIF_ID:this.notifdata[0].NOTIF_ID,START_DATE_NOTIF:this.form.value.START_DATE_NOTIF,END_DATE_NOTIF:this.form.value.END_DATE_NOTIF,NOTIF_TYPE_ID:this.form.value.NOTIF_TYPE_ID,DATA_ID:this.notifdata[0].DATA_ID,DISCORD_ID:this.notifdata[0].DISCORD_ID}),this.isAddMode&&this.isChecked&&this.form.get("notif").setValue({START_DATE_NOTIF:this.form.value.START_DATE_NOTIF,END_DATE_NOTIF:this.form.value.END_DATE_NOTIF,NOTIF_TYPE_ID:this.form.value.NOTIF_TYPE_ID}),this.alertService.loading(),this.subs.add(this.newsEventService.create(this.form.value).pipe((0,o.P)()).subscribe({next:()=>{this.alertService.success(),this.router.navigate(["../"],{relativeTo:this.route})},error:e=>{this.alertService.error(e),this.loading=!1}}))}changed(e){this.isChecked=e.target.checked}onSelection(e){this.form.get("group_news_list").setValue(e)}ngOnDestroy(){this.subs.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(r.qu),c.Y36(s.gz),c.Y36(s.F0),c.Y36(l.f),c.Y36(u.c9),c.Y36(n.uU),c.Y36(d.C),c.Y36(g.L),c.Y36(f))},e.\u0275cmp=c.Xpm({type:e,selectors:[["ng-component"]],decls:84,vars:44,consts:[[1,"title","d-flex","align-items-center","flex-wrap","mb-30"],["class","mr-40",4,"ngIf"],["routerLink","/news-event",1,"main-btn","primary-btn-outline","rounded-btn","btn-hover"],[1,"lni","lni-chevron-left","mr-5"],[1,"row"],[3,"formGroup","ngSubmit"],[1,"col-lg-6"],[1,"card-style","mb-30"],[1,"divider"],[1,"input-style-1"],["type","text","formControlName","NEWS",3,"ngClass"],[4,"ngIf"],["type","datetime-local","formControlName","START_DATE",3,"ngClass"],["type","datetime-local","formControlName","END_DATE",3,"ngClass"],[1,"input-style-3"],["placeholder","description","formControlName","DESCRIPTION",3,"ngClass"],[1,"icon"],[1,"lni","lni-text-format"],["type","text","formControlName","URL",3,"ngClass"],["type","file","accept","image/*",3,"change"],["imageInput",""],["class","img-preview-container",4,"ngIf"],["type","text","formControlName","PICTURE","disabled","",3,"ngClass"],[1,"select-style-1"],[1,"select-position"],["formControlName","CATEGORY_NEWS_ID",3,"ngClass","change"],[3,"value",4,"ngFor","ngForOf"],["bindLabel","INDUSTRY_NAME","placeholder","Select Industry","appendTo","body",3,"items","multiple","ngModel","ngModelOptions","change","ngModelChange"],[1,"form-check","form-switch","toggle-switch","mb-30"],["formControlName","ISACTIVE","type","checkbox","id","toggleSwitch1",1,"form-check-input"],["for","toggleSwitch1",1,"form-check-label"],["type","checkbox","id","toggleSwitch2",1,"form-check-input",3,"checked","change"],["for","toggleSwitch2",1,"form-check-label"],["class","input-style-1",4,"ngIf"],["class","select-style-1",4,"ngIf"],[1,"main-btn","primary-btn","rounded-btn","btn-hover",3,"disabled"],[1,"mr-40"],["style","color:red",4,"ngIf"],[2,"color","red"],[1,"img-preview-container"],[3,"ngStyle"],["class","img-loading-overlay",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"img-loading-overlay"],[1,"img-spinning-circle"],[1,"alert","alert-success"],[1,"alert","alert-danger"],[3,"value"],["type","datetime-local","formControlName","START_DATE_NOTIF",3,"ngClass"],["type","datetime-local","formControlName","END_DATE_NOTIF",3,"ngClass"],["formControlName","NOTIF_TYPE_ID",3,"ngClass"]],template:function(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",0),c.YNc(1,Z,2,0,"h2",1),c.YNc(2,A,2,0,"h2",1),c.TgZ(3,"button",2),c._UZ(4,"i",3),c._uU(5,"Back"),c.qZA(),c.qZA(),c.TgZ(6,"div",4),c.TgZ(7,"form",5),c.NdJ("ngSubmit",function(){return t.onSubmit()}),c.TgZ(8,"div",6),c.TgZ(9,"div",7),c.TgZ(10,"h5"),c._uU(11,"News Description"),c.qZA(),c.TgZ(12,"span",8),c._UZ(13,"hr"),c.qZA(),c.TgZ(14,"div",9),c.TgZ(15,"label"),c._uU(16,"News"),c.qZA(),c._UZ(17,"input",10),c.YNc(18,_,2,1,"div",11),c.qZA(),c.TgZ(19,"div",9),c.TgZ(20,"label"),c._uU(21,"Start Date"),c.qZA(),c._UZ(22,"input",12),c.YNc(23,b,2,1,"div",11),c.qZA(),c.TgZ(24,"div",9),c.TgZ(25,"label"),c._uU(26,"End Date"),c.qZA(),c._UZ(27,"input",13),c.YNc(28,N,2,1,"div",11),c.qZA(),c.TgZ(29,"div",14),c.TgZ(30,"textarea",15),c._uU(31," "),c.qZA(),c.TgZ(32,"span",16),c._UZ(33,"i",17),c.qZA(),c.YNc(34,q,2,1,"div",11),c.qZA(),c.TgZ(35,"div",9),c.TgZ(36,"label"),c._uU(37,"URL"),c.qZA(),c._UZ(38,"input",18),c.YNc(39,S,2,1,"div",11),c.qZA(),c.TgZ(40,"div",9),c.TgZ(41,"label"),c._uU(42,"Select Image"),c.qZA(),c.TgZ(43,"input",19,20),c.NdJ("change",function(){c.CHM(e);const i=c.MAs(44);return t.processFile(i)}),c.qZA(),c.qZA(),c.YNc(45,x,5,9,"div",21),c.TgZ(46,"div",9),c.TgZ(47,"label"),c._uU(48,"PICTURE"),c.qZA(),c._UZ(49,"input",22),c.YNc(50,Y,2,1,"div",11),c.qZA(),c.TgZ(51,"div",23),c.TgZ(52,"label"),c._uU(53,"Category"),c.qZA(),c.TgZ(54,"div",24),c.TgZ(55,"select",25),c.NdJ("change",function(e){return t.onSelectClick(e.target.value)}),c.YNc(56,k,2,2,"option",26),c.qZA(),c.qZA(),c.YNc(57,P,2,1,"div",11),c.qZA(),c.TgZ(58,"div"),c.TgZ(59,"label"),c._uU(60,"Group News By Industry"),c.qZA(),c.TgZ(61,"div",24),c.TgZ(62,"ng-select",27),c.NdJ("change",function(e){return t.onSelection(e)})("ngModelChange",function(e){return t.selectedIndustry=e}),c.qZA(),c.qZA(),c.qZA(),c._UZ(63,"br"),c.TgZ(64,"div",28),c._UZ(65,"input",29),c.TgZ(66,"label",30),c._uU(67,"IsActive"),c.qZA(),c.qZA(),c.TgZ(68,"div",28),c.TgZ(69,"input",31),c.NdJ("change",function(e){return t.changed(e)}),c.qZA(),c.TgZ(70,"label",32),c._uU(71,"Set Notif"),c.qZA(),c.qZA(),c.YNc(72,Q,5,4,"div",33),c.YNc(73,V,5,4,"div",33),c.YNc(74,j,7,5,"div",34),c.TgZ(75,"span",8),c._UZ(76,"hr"),c.qZA(),c.TgZ(77,"div"),c.TgZ(78,"button",2),c._uU(79," Cancel "),c.qZA(),c._uU(80,"\xa0 "),c.TgZ(81,"button",35),c.YNc(82,z,1,0,"span",11),c._uU(83," \xa0Save\xa0 "),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}2&e&&(c.xp6(1),c.Q6J("ngIf",t.isAddMode),c.xp6(1),c.Q6J("ngIf",!t.isAddMode),c.xp6(5),c.Q6J("formGroup",t.form),c.xp6(10),c.Q6J("ngClass",c.VKq(29,M,t.submitted&&t.f.NEWS.errors)),c.xp6(1),c.Q6J("ngIf",t.submitted&&t.f.NEWS.errors),c.xp6(4),c.Q6J("ngClass",c.VKq(31,M,t.submitted&&t.f.START_DATE.errors)),c.xp6(1),c.Q6J("ngIf",t.submitted&&t.f.START_DATE.errors),c.xp6(4),c.Q6J("ngClass",c.VKq(33,M,t.submitted&&t.f.END_DATE.errors)),c.xp6(1),c.Q6J("ngIf",t.submitted&&t.f.END_DATE.errors),c.xp6(2),c.Q6J("ngClass",c.VKq(35,M,t.submitted&&t.f.DESCRIPTION.errors)),c.xp6(4),c.Q6J("ngIf",t.submitted&&t.f.DESCRIPTION.errors),c.xp6(4),c.Q6J("ngClass",c.VKq(37,M,t.submitted&&t.f.URL.errors)),c.xp6(1),c.Q6J("ngIf",t.submitted&&t.f.URL.errors),c.xp6(6),c.Q6J("ngIf",t.selectedFile),c.xp6(4),c.Q6J("ngClass",c.VKq(39,M,t.submitted&&t.f.PICTURE.errors)),c.xp6(1),c.Q6J("ngIf",t.submitted&&t.f.PICTURE.errors),c.xp6(5),c.Q6J("ngClass",c.VKq(41,M,t.submitted&&t.f.CATEGORY_NEWS_ID.errors)),c.xp6(1),c.Q6J("ngForOf",t.category),c.xp6(1),c.Q6J("ngIf",t.submitted&&t.f.CATEGORY_NEWS_ID.errors),c.xp6(5),c.Q6J("items",t.industrylist)("multiple",!0)("ngModel",t.selectedIndustry)("ngModelOptions",c.DdM(43,H)),c.xp6(7),c.Q6J("checked",t.isChecked),c.xp6(3),c.Q6J("ngIf",t.isChecked),c.xp6(1),c.Q6J("ngIf",t.isChecked),c.xp6(1),c.Q6J("ngIf",t.isChecked),c.xp6(7),c.Q6J("disabled",t.loading),c.xp6(1),c.Q6J("ngIf",t.loading))},directives:[n.O5,s.rH,r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,n.mk,r.EJ,n.sg,T.w9,r.On,r.Wl,n.PC,r.YN,r.Kr],styles:['.image-upload-container[_ngcontent-%COMP%]{cursor:pointer}.img-preview-container[_ngcontent-%COMP%]{background-color:#f7f7f7;position:relative}.img-preview-container[_ngcontent-%COMP%]   .img-preview[_ngcontent-%COMP%]{background:center center no-repeat;background-size:contain;height:116px;width:116px}.img-preview-container[_ngcontent-%COMP%]   .img-preview-error[_ngcontent-%COMP%]{display:none}.img-loading-overlay[_ngcontent-%COMP%]{background-color:#000;bottom:0;left:0;opacity:.2;position:absolute;right:0;top:0}.img-spinning-circle[_ngcontent-%COMP%]{display:inline-block;width:64px;height:64px;margin:auto;position:absolute;top:0;left:0;bottom:0;right:0}.img-spinning-circle[_ngcontent-%COMP%]:after{content:" ";display:block;width:46px;height:46px;margin:1px;border-radius:50%;border:5px solid #fff;border-color:#fff transparent #fff transparent;-webkit-animation:lds-dual-ring 1.2s linear infinite;animation:lds-dual-ring 1.2s linear infinite}@-webkit-keyframes lds-dual-ring{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes lds-dual-ring{0%{transform:rotate(0)}to{transform:rotate(360deg)}}']}),e})(),ee=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&c._UZ(0,"router-outlet")},directives:[s.lC],encapsulation:2}),e})();var te=i(4693),ie=i.n(te),ne=i(152),re=i(2904),se=i(4168),oe=i(9142),ae=i(3940),ce=i(2518),le=i(9291),ue=i(1658);const de=new le.y(ue.Z);var ge=i(6172),pe=i(3984),he=i(8048),fe=i(6012),Te=i(6401),Ze=i(6517),Ae=i(2080),ve=i(797);const _e="Service workers are disabled or not supported by this browser";class me{constructor(e){if(this.serviceWorker=e,e){const t=(0,se.R)(e,"controllerchange").pipe((0,pe.U)(()=>e.controller)),i=(0,ne.P)(()=>(0,oe.of)(e.controller)),n=(0,ae.z)(i,t);this.worker=n.pipe((0,he.h)(e=>!!e)),this.registration=this.worker.pipe((0,fe.w)(()=>e.getRegistration()));const r=(0,se.R)(e,"message").pipe((0,pe.U)(e=>e.data)).pipe((0,he.h)(e=>e&&e.type)).pipe((0,Te.O)(new ce.xQ));r.connect(),this.events=r}else this.worker=this.events=this.registration=(_e,(0,ne.P)(()=>(0,re._)(new Error("Service workers are disabled or not supported by this browser"))))}postMessage(e,t){return this.worker.pipe((0,Ze.q)(1),(0,Ae.b)(i=>{i.postMessage(Object.assign({action:e},t))})).toPromise().then(()=>{})}postMessageWithOperation(e,t,i){const n=this.waitForOperationCompleted(i),r=this.postMessage(e,t);return Promise.all([r,n]).then(([,e])=>e)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let t;return t="string"==typeof e?t=>t.type===e:t=>e.includes(t.type),this.events.pipe((0,he.h)(t))}nextEventOfType(e){return this.eventsOfType(e).pipe((0,Ze.q)(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe((0,he.h)(t=>t.nonce===e),(0,Ze.q)(1),(0,pe.U)(e=>{if(void 0!==e.result)return e.result;throw new Error(e.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let be=(()=>{class e{constructor(e){if(this.sw=e,this.subscriptionChanges=new ce.xQ,!e.isEnabled)return this.messages=de,this.notificationClicks=de,void(this.subscription=de);this.messages=this.sw.eventsOfType("PUSH").pipe((0,pe.U)(e=>e.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,pe.U)(e=>e.data)),this.pushManager=this.sw.registration.pipe((0,pe.U)(e=>e.pushManager));const t=this.pushManager.pipe((0,fe.w)(e=>e.getSubscription()));this.subscription=(0,ge.T)(t,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(e){if(!this.sw.isEnabled)return Promise.reject(new Error(_e));const t={userVisibleOnly:!0};let i=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),n=new Uint8Array(new ArrayBuffer(i.length));for(let r=0;r<i.length;r++)n[r]=i.charCodeAt(r);return t.applicationServerKey=n,this.pushManager.pipe((0,fe.w)(e=>e.subscribe(t)),(0,Ze.q)(1)).toPromise().then(e=>(this.subscriptionChanges.next(e),e))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,Ze.q)(1),(0,fe.w)(e=>{if(null===e)throw new Error("Not subscribed to push notifications.");return e.unsubscribe().then(e=>{if(!e)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(_e))}decodeBase64(e){return atob(e)}}return e.\u0275fac=function(t){return new(t||e)(c.LFG(me))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e})(),Ee=(()=>{class e{constructor(e){if(this.sw=e,!e.isEnabled)return this.versionUpdates=de,this.available=de,this.activated=de,void(this.unrecoverable=de);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY"]),this.available=this.versionUpdates.pipe((0,he.h)(e=>"VERSION_READY"===e.type),(0,pe.U)(e=>({type:"UPDATE_AVAILABLE",current:e.currentVersion,available:e.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(_e));const e=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(_e));const e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}}return e.\u0275fac=function(t){return new(t||e)(c.LFG(me))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e})();class Ne{}const Ie=new c.OlP("NGSW_REGISTER_SCRIPT");function qe(e,t,i,r){return()=>{if(!(0,n.NF)(r)||!("serviceWorker"in navigator)||!1===i.enabled)return;let s;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof i.registrationStrategy)s=i.registrationStrategy();else{const[t,...n]=(i.registrationStrategy||"registerWhenStable:30000").split(":");switch(t){case"registerImmediately":s=(0,oe.of)(null);break;case"registerWithDelay":s=we(+n[0]||0);break;case"registerWhenStable":s=n[0]?(0,ge.T)(Se(e),we(+n[0])):Se(e);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${i.registrationStrategy}`)}}e.get(c.R0b).runOutsideAngular(()=>s.pipe((0,Ze.q)(1)).subscribe(()=>navigator.serviceWorker.register(t,{scope:i.scope}).catch(e=>console.error("Service worker registration failed with:",e))))}}function we(e){return(0,oe.of)(null).pipe((0,ve.g)(e))}function Se(e){return e.get(c.z2F).isStable.pipe((0,he.h)(e=>e))}function ye(e,t){return new me((0,n.NF)(t)&&!1!==e.enabled?navigator.serviceWorker:void 0)}let De=(()=>{class e{static register(t,i={}){return{ngModule:e,providers:[{provide:Ie,useValue:t},{provide:Ne,useValue:i},{provide:me,useFactory:ye,deps:[Ne,c.Lbi]},{provide:c.ip1,useFactory:qe,deps:[c.zs3,Ie,Ne,c.Lbi],multi:!0}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({providers:[be,Ee]}),e})();var Ue=i(7333),Ce=i(4968);function xe(e,t){1&e&&(c.TgZ(0,"div"),c.TgZ(1,"span",36),c._uU(2,"Active"),c.qZA(),c.qZA())}function Oe(e,t){1&e&&(c.TgZ(0,"span",37),c._uU(1,"Off"),c.qZA())}function Ye(e,t){1&e&&(c.TgZ(0,"span"),c._UZ(1,"i",38),c.qZA())}function ke(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td"),c.TgZ(2,"div",24),c._UZ(3,"img",25),c.qZA(),c.qZA(),c.TgZ(4,"td",26),c.TgZ(5,"p"),c._uU(6),c.qZA(),c.qZA(),c.TgZ(7,"td",26),c.TgZ(8,"p"),c._uU(9),c.ALo(10,"date"),c.qZA(),c.qZA(),c.TgZ(11,"td",26),c.TgZ(12,"p"),c._uU(13),c.ALo(14,"date"),c.qZA(),c.qZA(),c.TgZ(15,"td",26),c.TgZ(16,"p"),c._uU(17),c.qZA(),c.qZA(),c.TgZ(18,"td",26),c.YNc(19,xe,3,0,"div",27),c.YNc(20,Oe,2,0,"ng-template",null,28,c.W1O),c.qZA(),c.TgZ(22,"td"),c.TgZ(23,"div",29),c.TgZ(24,"button",30),c.NdJ("click",function(){return c.CHM(e),c.oxw().subscribeToNotification()}),c._UZ(25,"i",31),c.qZA(),c._uU(26,"\xa0 "),c.TgZ(27,"button",32),c._UZ(28,"i",33),c.qZA(),c._uU(29,"\xa0 "),c.TgZ(30,"button",34),c.NdJ("click",function(){const t=c.CHM(e).$implicit;return c.oxw().confirmBox("delete",t)}),c.YNc(31,Ye,2,0,"span",35),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=t.$implicit,i=c.MAs(21),n=c.oxw();c.xp6(3),c.s9C("src",n.apiurl+e.PICTURE,c.LSH),c.xp6(3),c.Oqu(e.NEWS),c.xp6(3),c.Oqu(c.xi3(10,10,e.START_DATE,"fullDate")),c.xp6(4),c.Oqu(c.xi3(14,13,e.END_DATE,"fullDate")),c.xp6(4),c.Oqu(e.CATEGORY_NEWS_NAME),c.xp6(2),c.Q6J("ngIf",e.ISACTIVE)("ngIfElse",i),c.xp6(8),c.MGl("routerLink","edit/",e.NEWS_ID,""),c.xp6(3),c.Q6J("disabled",e.isDeleting),c.xp6(1),c.Q6J("ngIf",!e.isDeleting)}}const Fe=function(e,t){return{itemsPerPage:e,currentPage:t}},Pe=[{path:"news-event",component:ee,children:[{path:"",component:(()=>{class e{constructor(e,t,i,n){this.newseventService=e,this.imageService=t,this.swPush=i,this.alertService=n,this.subs=new a.Y,this.news=null,this.VAPID_PUBLIC_KEY="BPSXG3mAlQc4zZ9aluFL8rCwgzJRcdWvLkBQYEPV7nukhcKAO8iUXhxLaeecUojilqloMXmvKwW8WmBK3Od87Zw",this.baseUrl="http://localhost:4200/news",this.p=1,this.count=10,this.countdata=null,this.apiurl=p.N.apiUrl+"/image/"}ngOnInit(){this.subs.add(this.newseventService.getAll().pipe((0,o.P)()).subscribe(e=>{this.news=e,this.countdata=this.news.length}))}deleteNews(e){this.alertService.loading();const t=this.news.find(t=>t.NEWS_ID===e.NEWS_ID);this.subs.add(this.newseventService.delete(e.NEWS_ID).pipe((0,o.P)()).subscribe(()=>{t.isDeleting=!0,this.news=this.news.filter(t=>t.NEWS_ID!==e.NEWS_ID),this.subs.add(this.imageService.deleteImage(t.PICTURE).pipe((0,o.P)()).subscribe()),this.countdata=this.news.length,this.alertService.success()},e=>{this.alertService.error(e)}))}subscribeToNotification(){this.swPush.isEnabled&&(console.log("masukk"),this.swPush.requestSubscription({serverPublicKey:this.VAPID_PUBLIC_KEY}).then(e=>console.log(e)).catch(e=>console.error("Could not subscribe to notifications",e)))}confirmBox(e,t){"delete"==e&&ie().fire({title:"Are you sure want to delete?",text:t.NEWS,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(e=>{e.value&&this.deleteNews(t)})}ngOnDestroy(){this.subs.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(l.f),c.Y36(d.C),c.Y36(be),c.Y36(u.c9))},e.\u0275cmp=c.Xpm({type:e,selectors:[["ng-component"]],decls:60,vars:12,consts:[[1,"title","d-flex","align-items-center","flex-wrap","mb-30"],[1,"mr-40"],["routerLink","add",1,"main-btn","primary-btn","btn-hover","btn-sm"],[1,"lni","lni-plus","mr-5"],[1,"tables-wrapper"],[1,"row"],[1,"col-lg-12"],[1,"card-style","mb-30"],[1,"row","align-items-center"],[1,"col-md-6"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center","py-3"],[1,"left"],[1,"right"],[1,"table-search","d-flex"],["action","#"],["type","text","name","something","placeholder","Search...",3,"ngModel","ngModelChange"],[1,"lni","lni-search-alt"],[1,"table-wrapper","table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[1,"pt-10","d-flex","flex-wrap","justify-content-between"],[1,"text-sm","text-gray"],[1,"text-right"],[3,"pageChange"],[1,"employee-image"],["alt","",3,"src"],[1,"min-width"],[4,"ngIf","ngIfElse"],["off",""],[1,"action"],[1,"text-primary",2,"cursor","pointer",3,"click"],[1,"lni","lni-alarm"],[1,"text-primary",2,"cursor","pointer",3,"routerLink"],[1,"lni","lni-pencil-alt"],[1,"text-danger",3,"disabled","click"],[4,"ngIf"],[1,"status-btn","active-btn"],[1,"status-btn","close-btn"],[1,"lni","lni-trash-can"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"h2",1),c._uU(2,"News-Event Management"),c.qZA(),c.TgZ(3,"button",2),c._UZ(4,"i",3),c._uU(5," New Event"),c.qZA(),c.qZA(),c.TgZ(6,"div",4),c.TgZ(7,"div",5),c.TgZ(8,"div",6),c.TgZ(9,"div",7),c.TgZ(10,"div",8),c._UZ(11,"div",9),c.qZA(),c.TgZ(12,"div",10),c.TgZ(13,"div",11),c.TgZ(14,"p"),c._uU(15,"Show "),c.TgZ(16,"span"),c._uU(17,"10"),c.qZA(),c._uU(18," entries"),c.qZA(),c.qZA(),c.TgZ(19,"div",12),c.TgZ(20,"div",13),c.TgZ(21,"form",14),c.TgZ(22,"input",15),c.NdJ("ngModelChange",function(e){return t.filterdata=e}),c.qZA(),c.TgZ(23,"button"),c._UZ(24,"i",16),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(25,"div",17),c.TgZ(26,"table",18),c.TgZ(27,"thead"),c.TgZ(28,"tr"),c.TgZ(29,"th"),c.TgZ(30,"h6"),c._uU(31,"#"),c.qZA(),c.qZA(),c.TgZ(32,"th"),c.TgZ(33,"h6"),c._uU(34,"News"),c.qZA(),c.qZA(),c.TgZ(35,"th"),c.TgZ(36,"h6"),c._uU(37,"Start Date"),c.qZA(),c.qZA(),c.TgZ(38,"th"),c.TgZ(39,"h6"),c._uU(40,"End Date"),c.qZA(),c.qZA(),c.TgZ(41,"th"),c.TgZ(42,"h6"),c._uU(43,"Category"),c.qZA(),c.qZA(),c.TgZ(44,"th"),c.TgZ(45,"h6"),c._uU(46,"Status"),c.qZA(),c.qZA(),c.TgZ(47,"th"),c.TgZ(48,"h6"),c._uU(49,"Action"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(50,"tbody"),c.YNc(51,ke,32,16,"tr",19),c.ALo(52,"paginate"),c.ALo(53,"filter"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(54,"div",20),c.TgZ(55,"div",11),c.TgZ(56,"p",21),c._uU(57),c.qZA(),c.qZA(),c.TgZ(58,"div",22),c.TgZ(59,"pagination-controls",23),c.NdJ("pageChange",function(e){return t.p=e}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(22),c.Q6J("ngModel",t.filterdata),c.xp6(29),c.Q6J("ngForOf",c.xi3(52,3,c.xi3(53,6,t.news,t.filterdata),c.WLB(9,Fe,t.count,t.p))),c.xp6(6),c.hij("Total ",t.countdata," Data"))},directives:[s.rH,r._Y,r.JL,r.F,r.Fj,r.JJ,r.On,n.sg,Ue.LS,n.O5],pipes:[Ue._s,Ce.Z,n.uU],encapsulation:2}),e})()},{path:"add",component:$},{path:"edit/:id",component:$}]}];let Re=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[s.Bz.forChild(Pe)],s.Bz]}),e})(),Je=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({providers:[n.uU],imports:[[n.ez,r.UX,Re,T.A0,r.u5,De.register("ngsw-worker.js",{enabled:!0}),Ue.JX,Ce.h]]}),e})()}}]);