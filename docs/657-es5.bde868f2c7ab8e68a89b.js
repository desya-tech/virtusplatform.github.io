!function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}(self.webpackChunkappdemo_ng12=self.webpackChunkappdemo_ng12||[]).push([[657],{7657:function(e,i,r){r.r(i),r.d(i,{BpManagementModule:function(){return E}});var s=r(2224),u=r(30),o=r(8127),l=r(7112),a=r(5688),c=r(7147),d=r(4376),p=r(1569),g=r(7393),f=r(432),Z=r(2016);function h(t,e){1&t&&(c.TgZ(0,"h2",18),c._uU(1,"New Bp"),c.qZA())}function b(t,e){1&t&&(c.TgZ(0,"h2",18),c._uU(1,"Edit Bp"),c.qZA())}function m(t,e){1&t&&(c.TgZ(0,"div",19),c.TgZ(1,"label"),c._uU(2,"Company Name"),c.qZA(),c._UZ(3,"input",20),c.qZA())}function v(t,e){if(1&t&&(c.TgZ(0,"option",22),c._uU(1),c.qZA()),2&t){var n=e.$implicit;c.s9C("value",n.COMPANY_ID),c.xp6(1),c.Oqu(n.COMPANY_NAME)}}function A(t,e){1&t&&(c.TgZ(0,"div",24),c._uU(1,"*Company required"),c.qZA())}function _(t,e){if(1&t&&(c.TgZ(0,"div"),c.YNc(1,A,2,0,"div",23),c.qZA()),2&t){var n=c.oxw(2);c.xp6(1),c.Q6J("ngIf",n.f.COMPANY_ID.errors.required)}}var q=function(t){return{"is-invalid":t}};function T(t,e){if(1&t){var n=c.EpF();c.TgZ(0,"div",11),c.TgZ(1,"label"),c._uU(2,"Company Name"),c.qZA(),c.TgZ(3,"div",12),c.TgZ(4,"select",21),c.NdJ("change",function(t){return c.CHM(n),c.oxw().onSelectClick(t.target.value)}),c.YNc(5,v,2,2,"option",14),c.qZA(),c.qZA(),c.YNc(6,_,2,1,"div",15),c.qZA()}if(2&t){var i=c.oxw();c.xp6(4),c.Q6J("ngClass",c.VKq(3,q,i.submitted&&i.f.COMPANY_ID.errors)),c.xp6(1),c.Q6J("ngForOf",i.bplist),c.xp6(1),c.Q6J("ngIf",i.submitted&&i.f.COMPANY_ID.errors)}}function y(t,e){if(1&t&&(c.TgZ(0,"option",22),c._uU(1),c.qZA()),2&t){var n=e.$implicit;c.s9C("value",n.BP_GROUP_ID),c.xp6(1),c.Oqu(n.BP_GROUP_NAME)}}function P(t,e){1&t&&(c.TgZ(0,"div",24),c._uU(1,"*bp group required"),c.qZA())}function x(t,e){if(1&t&&(c.TgZ(0,"div"),c.YNc(1,P,2,0,"div",23),c.qZA()),2&t){var n=c.oxw();c.xp6(1),c.Q6J("ngIf",n.f.BP_GROUP_ID.errors.required)}}function N(t,e){1&t&&c._UZ(0,"span")}var I,M=function(){return{standalone:!0}},U=((I=function(){function e(n,i,r,s,u,o,l){t(this,e),this.formBuilder=n,this.route=i,this.router=r,this.industryService=s,this.alertService=u,this.bpService=o,this.bpGroupService=l,this.subs=new a.Y,this.loading=!1,this.submitted=!1,this.bplist=null,this.industrylist=null,this.bpname=null,this.selectedIndustry=null,this.data=null,this.bpgroup=null}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.id=this.route.snapshot.params.id,this.isAddMode=!this.id,this.form=this.formBuilder.group({M_BP_ID:[0],COMPANY_ID:["",o.kI.required],COMPANY_NAME:[""],industry_list:[""],BP_GROUP_ID:["",o.kI.required]}),this.isAddMode||(this.subs.add(this.industryService.getById(this.id).pipe((0,l.P)()).subscribe(function(e){return t.form.patchValue(e)})),this.subs.add(this.industryService.getbyindustry(this.id).pipe((0,l.P)()).subscribe(function(e){t.selectedIndustry=e}))),this.subs.add(this.bpService.getAllbyUser().subscribe(function(e){return t.bplist=e})),this.subs.add(this.industryService.getlistindustry().subscribe(function(e){return t.industrylist=e})),this.subs.add(this.bpGroupService.getAll().subscribe(function(e){return t.bpgroup=e}))}},{key:"f",get:function(){return this.form.controls}},{key:"onSubmit",value:function(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.createIndustry())}},{key:"createIndustry",value:function(){var t=this;this.alertService.loading(),this.subs.add(this.bpService.create(this.form.value).pipe((0,l.P)()).subscribe({next:function(){t.alertService.success(),t.router.navigate(["/bp-management"],{relativeTo:t.route})},error:function(e){t.alertService.error(e),t.loading=!1}}))}},{key:"onSelection",value:function(t){this.form.get("industry_list").setValue(t)}},{key:"onSelectClick",value:function(t){this.bpname=this.bplist.filter(function(e){return e.COMPANY_ID===t})[0].COMPANY_NAME,this.form.get("COMPANY_NAME").setValue(this.bpname)}},{key:"ngOnDestroy",value:function(){this.subs.unsubscribe()}}]),e}()).\u0275fac=function(t){return new(t||I)(c.Y36(o.qu),c.Y36(u.gz),c.Y36(u.F0),c.Y36(d.L),c.Y36(p.c9),c.Y36(g.m),c.Y36(f._))},I.\u0275cmp=c.Xpm({type:I,selectors:[["app-bp-add-edit"]],decls:37,vars:17,consts:[[1,"title","d-flex","align-items-center","flex-wrap","mb-30"],["class","mr-40",4,"ngIf"],["routerLink","/bp-management",1,"main-btn","primary-btn-outline","rounded-btn","btn-hover"],[1,"lni","lni-chevron-left","mr-5"],[1,"row"],[3,"formGroup","ngSubmit"],[1,"col-lg-6"],[1,"card-style","mb-30"],[1,"divider"],["class","input-style-1",4,"ngIf"],["class","select-style-1",4,"ngIf"],[1,"select-style-1"],[1,"select-position"],["formControlName","BP_GROUP_ID",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["bindLabel","INDUSTRY_NAME","placeholder","Select Industry","appendTo","body",3,"items","multiple","ngModel","ngModelOptions","change","ngModelChange"],[1,"main-btn","primary-btn","rounded-btn","btn-hover",3,"disabled"],[1,"mr-40"],[1,"input-style-1"],["type","text","formControlName","COMPANY_NAME","disabled",""],["formControlName","COMPANY_ID",3,"ngClass","change"],[3,"value"],["style","color:red",4,"ngIf"],[2,"color","red"]],template:function(t,e){1&t&&(c.TgZ(0,"div",0),c.YNc(1,h,2,0,"h2",1),c.YNc(2,b,2,0,"h2",1),c.TgZ(3,"button",2),c._UZ(4,"i",3),c._uU(5,"Back"),c.qZA(),c.qZA(),c.TgZ(6,"div",4),c.TgZ(7,"form",5),c.NdJ("ngSubmit",function(){return e.onSubmit()}),c.TgZ(8,"div",6),c.TgZ(9,"div",7),c.TgZ(10,"h5"),c._uU(11,"Business Partner"),c.qZA(),c.TgZ(12,"span",8),c._UZ(13,"hr"),c.qZA(),c.YNc(14,m,4,0,"div",9),c.YNc(15,T,7,5,"div",10),c.TgZ(16,"div",11),c.TgZ(17,"label"),c._uU(18,"Bp Group"),c.qZA(),c.TgZ(19,"div",12),c.TgZ(20,"select",13),c.YNc(21,y,2,2,"option",14),c.qZA(),c.qZA(),c.YNc(22,x,2,1,"div",15),c.qZA(),c.TgZ(23,"div"),c.TgZ(24,"label"),c._uU(25,"Industry"),c.qZA(),c.TgZ(26,"div",12),c.TgZ(27,"ng-select",16),c.NdJ("change",function(t){return e.onSelection(t)})("ngModelChange",function(t){return e.selectedIndustry=t}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(28,"span",8),c._UZ(29,"hr"),c.qZA(),c.TgZ(30,"div"),c.TgZ(31,"button",2),c._uU(32," Cancel "),c.qZA(),c._uU(33,"\xa0 "),c.TgZ(34,"button",17),c.YNc(35,N,1,0,"span",15),c._uU(36," \xa0Save\xa0 "),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(1),c.Q6J("ngIf",e.isAddMode),c.xp6(1),c.Q6J("ngIf",!e.isAddMode),c.xp6(5),c.Q6J("formGroup",e.form),c.xp6(7),c.Q6J("ngIf",!e.isAddMode),c.xp6(1),c.Q6J("ngIf",e.isAddMode),c.xp6(5),c.Q6J("ngClass",c.VKq(14,q,e.submitted&&e.f.BP_GROUP_ID.errors)),c.xp6(1),c.Q6J("ngForOf",e.bpgroup),c.xp6(1),c.Q6J("ngIf",e.submitted&&e.f.BP_GROUP_ID.errors),c.xp6(5),c.Q6J("items",e.industrylist)("multiple",!0)("ngModel",e.selectedIndustry)("ngModelOptions",c.DdM(16,M)),c.xp6(7),c.Q6J("disabled",e.loading),c.xp6(1),c.Q6J("ngIf",e.loading))},directives:[s.O5,u.rH,o._Y,o.JL,o.sg,o.EJ,o.JJ,o.u,s.mk,s.sg,Z.w9,o.On,o.Fj,o.YN,o.Kr],styles:[""]}),I),O=function(){var e=function(){function e(){t(this,e)}return n(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-bp-layout"]],decls:1,vars:0,template:function(t,e){1&t&&c._UZ(0,"router-outlet")},directives:[u.lC],styles:[""]}),e}(),Y=r(4693),C=r.n(Y),B=r(7333),S=r(4968);function w(t,e){if(1&t&&(c.TgZ(0,"p"),c._uU(1),c.qZA()),2&t){var n=e.$implicit;c.xp6(1),c.Oqu(n.INDUSTRY_NAME)}}function J(t,e){1&t&&(c.TgZ(0,"span"),c._UZ(1,"i",30),c.qZA())}function D(t,e){if(1&t){var n=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td",24),c.TgZ(2,"p"),c._uU(3),c.qZA(),c.qZA(),c.TgZ(4,"td",24),c.TgZ(5,"p"),c._uU(6),c.qZA(),c.qZA(),c.TgZ(7,"td",24),c.YNc(8,w,2,1,"p",19),c.qZA(),c.TgZ(9,"td"),c.TgZ(10,"div",25),c.TgZ(11,"button",26),c._UZ(12,"i",27),c.qZA(),c._uU(13,"\xa0 "),c.TgZ(14,"button",28),c.NdJ("click",function(){var t=c.CHM(n).$implicit;return c.oxw().confirmBox("delete",t)}),c.YNc(15,J,2,0,"span",29),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&t){var i=e.$implicit,r=c.oxw();c.xp6(3),c.Oqu(i.COMPANY_NAME),c.xp6(3),c.Oqu(r.setbpname(i.BP_GROUP_ID)),c.xp6(2),c.Q6J("ngForOf",i.industry_list),c.xp6(3),c.MGl("routerLink","edit/",i.M_BP_ID,""),c.xp6(3),c.Q6J("disabled",i.isDeleting),c.xp6(1),c.Q6J("ngIf",!i.isDeleting)}}var k=function(t,e){return{itemsPerPage:t,currentPage:e}},Q=[{path:"bp-management",component:O,children:[{path:"",component:function(){var e=function(){function e(n,i,r){t(this,e),this.bpService=n,this.bpGroupService=i,this.alertService=r,this.subs=new a.Y,this.mbplist=null,this.groupPointBp=null,this.p=1,this.count=10,this.countuser=null,this.countdata=null}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.subs.add(this.bpService.getmbp().pipe((0,l.P)()).subscribe(function(e){t.mbplist=e,t.countdata=t.mbplist.length})),this.subs.add(this.bpGroupService.getAll().pipe((0,l.P)()).subscribe(function(e){return t.groupPointBp=e}))}},{key:"delete",value:function(t){var e=this;this.alertService.loading();var n=this.mbplist.find(function(e){return e.M_BP_ID===t.M_BP_ID});this.subs.add(this.bpService.deletembp(t.M_BP_ID).pipe((0,l.P)()).subscribe(function(){n.isDeleting=!0,e.mbplist=e.mbplist.filter(function(e){return e.M_BP_ID!==t.M_BP_ID}),e.countdata=e.mbplist.length,e.alertService.success()},function(t){e.alertService.error(t)}))}},{key:"setbpname",value:function(t){if(null!==this.groupPointBp)return null==t?null:this.groupPointBp.find(function(e){return e.BP_GROUP_ID===t}).BP_GROUP_NAME}},{key:"confirmBox",value:function(t,e){var n=this;"delete"==t&&C().fire({title:"Are you sure want to delete?",text:e.COMPANY_NAME,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(function(t){t.value&&n.delete(e)})}},{key:"ngOnDestroy",value:function(){this.subs.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(g.m),c.Y36(f._),c.Y36(p.c9))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-bp-management"]],decls:51,vars:12,consts:[[1,"title","d-flex","align-items-center","flex-wrap","mb-30"],[1,"mr-40"],["routerLink","add",1,"main-btn","primary-btn","btn-hover","btn-sm"],[1,"lni","lni-plus","mr-5"],[1,"tables-wrapper"],[1,"row"],[1,"col-lg-12"],[1,"card-style","mb-30"],[1,"row","align-items-center"],[1,"col-md-6"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center","py-3"],[1,"left"],[1,"right"],[1,"table-search","d-flex"],["action","#"],["type","text","name","something","placeholder","Search...",3,"ngModel","ngModelChange"],[1,"lni","lni-search-alt"],[1,"table-wrapper","table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[1,"pt-10","d-flex","flex-wrap","justify-content-between"],[1,"text-sm","text-gray"],[1,"text-right"],[3,"pageChange"],[1,"min-width"],[1,"action"],[1,"text-primary",2,"cursor","pointer",3,"routerLink"],[1,"lni","lni-pencil-alt"],[1,"text-danger",3,"disabled","click"],[4,"ngIf"],[1,"lni","lni-trash-can"]],template:function(t,e){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"h2",1),c._uU(2,"Business Partner Management"),c.qZA(),c.TgZ(3,"button",2),c._UZ(4,"i",3),c._uU(5," New"),c.qZA(),c.qZA(),c.TgZ(6,"div",4),c.TgZ(7,"div",5),c.TgZ(8,"div",6),c.TgZ(9,"div",7),c.TgZ(10,"div",8),c._UZ(11,"div",9),c.qZA(),c.TgZ(12,"div",10),c.TgZ(13,"div",11),c.TgZ(14,"p"),c._uU(15,"Show "),c.TgZ(16,"span"),c._uU(17,"10"),c.qZA(),c._uU(18," entries"),c.qZA(),c.qZA(),c.TgZ(19,"div",12),c.TgZ(20,"div",13),c.TgZ(21,"form",14),c.TgZ(22,"input",15),c.NdJ("ngModelChange",function(t){return e.filterdata=t}),c.qZA(),c.TgZ(23,"button"),c._UZ(24,"i",16),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(25,"div",17),c.TgZ(26,"table",18),c.TgZ(27,"thead"),c.TgZ(28,"tr"),c.TgZ(29,"th"),c.TgZ(30,"h6"),c._uU(31,"COMPANY"),c.qZA(),c.qZA(),c.TgZ(32,"th"),c.TgZ(33,"h6"),c._uU(34,"GROUP"),c.qZA(),c.qZA(),c.TgZ(35,"th"),c.TgZ(36,"h6"),c._uU(37,"INDUSTRY"),c.qZA(),c.qZA(),c.TgZ(38,"th"),c.TgZ(39,"h6"),c._uU(40,"ACTION"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(41,"tbody"),c.YNc(42,D,16,6,"tr",19),c.ALo(43,"paginate"),c.ALo(44,"filter"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(45,"div",20),c.TgZ(46,"div",11),c.TgZ(47,"p",21),c._uU(48),c.qZA(),c.qZA(),c.TgZ(49,"div",22),c.TgZ(50,"pagination-controls",23),c.NdJ("pageChange",function(t){return e.p=t}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(22),c.Q6J("ngModel",e.filterdata),c.xp6(20),c.Q6J("ngForOf",c.xi3(43,3,c.xi3(44,6,e.mbplist,e.filterdata),c.WLB(9,k,e.count,e.p))),c.xp6(6),c.hij("Total ",e.countdata," BP"))},directives:[u.rH,o._Y,o.JL,o.F,o.Fj,o.JJ,o.On,s.sg,B.LS,s.O5],pipes:[B._s,S.Z],styles:[""]}),e}()},{path:"add",component:U},{path:"edit/:id",component:U}]}],G=function(){var e=function e(){t(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[u.Bz.forChild(Q)],u.Bz]}),e}(),E=function(){var e=function e(){t(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[s.ez,o.UX,G,Z.A0,o.u5,B.JX,S.h]]}),e}()}}])}();