!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}(self.webpackChunkappdemo_ng12=self.webpackChunkappdemo_ng12||[]).push([[73],{8073:function(t,i,r){r.r(i),r.d(i,{RuleManagementModule:function(){return B}});var u=r(2224),o=r(30),a=r(8127),s=r(7112),c=r(5688),l=r(7147),Z=r(2185),g=r(9168);function d(e,t){1&e&&(l.TgZ(0,"div",23),l._uU(1,"*rule name required"),l.qZA())}function f(e,t){if(1&e&&(l.TgZ(0,"div"),l.YNc(1,d,2,0,"div",22),l.qZA()),2&e){var n=l.oxw();l.xp6(1),l.Q6J("ngIf",n.f.RULE_NAME.errors.required)}}function p(e,t){1&e&&l._UZ(0,"span")}var h,T=function(e){return{"is-invalid":e}},A=((h=function(){function t(n,i,r,u,o){e(this,t),this.formBuilder=n,this.route=i,this.router=r,this.ruleService=u,this.alertService=o,this.subs=new c.Y,this.loading=!1,this.submitted=!1}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.id=this.route.snapshot.params.id,this.isAddMode=!this.id,this.form=this.formBuilder.group({RULE_NAME:["",a.kI.required],USER_MGMT:[""],RULE_MGMT:[""],ACTIVITY_MGMT:[""],LEADERBOARDS_PAGE:[""],PRODUCT_MGMT:[""],CONTENT_MGMT:[""]}),this.isAddMode||this.subs.add(this.ruleService.getByID(this.id).subscribe(function(t){return e.form.patchValue(t)}))}},{key:"f",get:function(){return this.form.controls}},{key:"onSubmit",value:function(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.isAddMode?(this.form.value.RULE_ID=this.form.value.RULE_NAME.replace(/ .*/,"").replace(/[aeiou]/gi,"").toUpperCase()+"00"+this.getRandomInt(10),this.createRole()):this.updateRule())}},{key:"createRole",value:function(){var e=this;this.alertService.loading(),this.subs.add(this.ruleService.register(this.form.value).pipe((0,s.P)()).subscribe({next:function(){e.alertService.success(),e.router.navigate(["../"],{relativeTo:e.route})},error:function(t){e.alertService.error(t),e.loading=!1}}))}},{key:"updateRule",value:function(){var e=this;this.alertService.loading(),this.subs.add(this.ruleService.update(this.id,this.form.value).pipe((0,s.P)()).subscribe({next:function(){e.alertService.success(),e.router.navigate(["../../"],{relativeTo:e.route})},error:function(t){e.alertService.error(t),e.loading=!1}}))}},{key:"getRandomInt",value:function(e){return Math.floor(Math.random()*e)}},{key:"ngOnDestroy",value:function(){this.subs.unsubscribe()}}]),t}()).\u0275fac=function(e){return new(e||h)(l.Y36(a.qu),l.Y36(o.gz),l.Y36(o.F0),l.Y36(Z.P),l.Y36(g.c))},h.\u0275cmp=l.Xpm({type:h,selectors:[["ng-component"]],decls:58,vars:7,consts:[[1,"title","d-flex","align-items-center","flex-wrap","mb-30"],[1,"mr-40"],["routerLink","/roles",1,"main-btn","primary-btn-outline","rounded-btn","btn-hover"],[1,"lni","lni-chevron-left","mr-5"],[1,"row"],[3,"formGroup","ngSubmit"],[1,"col-lg-6"],[1,"card-style","mb-30"],[1,"divider"],[1,"input-style-1"],["type","text","formControlName","RULE_NAME",3,"ngClass"],[4,"ngIf"],[1,"form-check","form-switch","toggle-switch","mb-30"],["formControlName","USER_MGMT","type","checkbox","id","toggleSwitch1",1,"form-check-input"],["for","toggleSwitch1",1,"form-check-label"],["formControlName","RULE_MGMT","type","checkbox","id","toggleSwitch1",1,"form-check-input"],["formControlName","ACTIVITY_MGMT","type","checkbox","id","toggleSwitch1",1,"form-check-input"],["formControlName","PRODUCT_MGMT","type","checkbox","id","toggleSwitch1",1,"form-check-input"],["formControlName","CONTENT_MGMT","type","checkbox","id","toggleSwitch1",1,"form-check-input"],["formControlName","LEADERBOARDS_PAGE","type","checkbox","id","toggleSwitch1",1,"form-check-input"],["routerLink","/rule-management",1,"main-btn","primary-btn-outline","rounded-btn","btn-hover"],[1,"main-btn","primary-btn","rounded-btn","btn-hover",3,"disabled"],["style","color:red",4,"ngIf"],[2,"color","red"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"h2",1),l._uU(2,"New Rule"),l.qZA(),l.TgZ(3,"button",2),l._UZ(4,"i",3),l._uU(5,"Back"),l.qZA(),l.qZA(),l.TgZ(6,"div",4),l.TgZ(7,"form",5),l.NdJ("ngSubmit",function(){return t.onSubmit()}),l.TgZ(8,"div",6),l.TgZ(9,"div",7),l.TgZ(10,"h5"),l._uU(11,"Rule Description"),l.qZA(),l.TgZ(12,"span",8),l._UZ(13,"hr"),l.qZA(),l.TgZ(14,"div",9),l.TgZ(15,"label"),l._uU(16," Role Name "),l.qZA(),l._UZ(17,"input",10),l.YNc(18,f,2,1,"div",11),l.qZA(),l.TgZ(19,"span",8),l._UZ(20,"hr"),l.qZA(),l.TgZ(21,"h5"),l._uU(22,"Rule Permission"),l.qZA(),l.TgZ(23,"span",8),l._UZ(24,"hr"),l.qZA(),l.TgZ(25,"div",12),l._UZ(26,"input",13),l.TgZ(27,"label",14),l._uU(28,"User Management"),l.qZA(),l.qZA(),l.TgZ(29,"div",12),l._UZ(30,"input",15),l.TgZ(31,"label",14),l._uU(32,"Rule Management"),l.qZA(),l.qZA(),l.TgZ(33,"div",12),l._UZ(34,"input",16),l.TgZ(35,"label",14),l._uU(36,"Activity Management"),l.qZA(),l.qZA(),l.TgZ(37,"div",12),l._UZ(38,"input",17),l.TgZ(39,"label",14),l._uU(40,"Product Management"),l.qZA(),l.qZA(),l.TgZ(41,"div",12),l._UZ(42,"input",18),l.TgZ(43,"label",14),l._uU(44,"Content Management"),l.qZA(),l.qZA(),l.TgZ(45,"div",12),l._UZ(46,"input",19),l.TgZ(47,"label",14),l._uU(48,"Access Leaderboards"),l.qZA(),l.qZA(),l.TgZ(49,"span",8),l._UZ(50,"hr"),l.qZA(),l.TgZ(51,"div"),l.TgZ(52,"button",20),l._uU(53," Cancel "),l.qZA(),l._uU(54,"\xa0 "),l.TgZ(55,"button",21),l.YNc(56,p,1,0,"span",11),l._uU(57," \xa0Save\xa0 "),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.xp6(7),l.Q6J("formGroup",t.form),l.xp6(10),l.Q6J("ngClass",l.VKq(5,T,t.submitted&&t.f.RULE_NAME.errors)),l.xp6(1),l.Q6J("ngIf",t.submitted&&t.f.RULE_NAME.errors),l.xp6(37),l.Q6J("disabled",t.loading),l.xp6(1),l.Q6J("ngIf",t.loading))},directives:[o.rH,a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,u.mk,u.O5,a.Wl],encapsulation:2}),h),m=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Xpm({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&l._UZ(0,"router-outlet")},directives:[o.lC],encapsulation:2}),t}(),v=r(4693),q=r.n(v),_=r(1569),b=r(7333),U=r(4968);function M(e,t){1&e&&(l.TgZ(0,"div"),l.TgZ(1,"span",31),l._uU(2,"True"),l.qZA(),l.qZA())}function x(e,t){1&e&&(l.TgZ(0,"span",32),l._uU(1,"False"),l.qZA())}function y(e,t){1&e&&(l.TgZ(0,"div"),l.TgZ(1,"span",31),l._uU(2,"True"),l.qZA(),l.qZA())}function E(e,t){1&e&&(l.TgZ(0,"span",32),l._uU(1,"False"),l.qZA())}function R(e,t){1&e&&(l.TgZ(0,"div"),l.TgZ(1,"span",31),l._uU(2,"True"),l.qZA(),l.qZA())}function N(e,t){1&e&&(l.TgZ(0,"span",32),l._uU(1,"False"),l.qZA())}function I(e,t){1&e&&(l.TgZ(0,"div"),l.TgZ(1,"span",31),l._uU(2,"True"),l.qZA(),l.qZA())}function k(e,t){1&e&&(l.TgZ(0,"span",32),l._uU(1,"False"),l.qZA())}function w(e,t){1&e&&(l.TgZ(0,"div"),l.TgZ(1,"span",31),l._uU(2,"True"),l.qZA(),l.qZA())}function S(e,t){1&e&&(l.TgZ(0,"span",32),l._uU(1,"False"),l.qZA())}function L(e,t){1&e&&(l.TgZ(0,"div"),l.TgZ(1,"span",31),l._uU(2,"True"),l.qZA(),l.qZA())}function C(e,t){1&e&&(l.TgZ(0,"span",32),l._uU(1,"False"),l.qZA())}function Y(e,t){1&e&&(l.TgZ(0,"span"),l._UZ(1,"i",33),l.qZA())}function J(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"tr"),l.TgZ(1,"td",23),l.TgZ(2,"p"),l._uU(3),l.qZA(),l.qZA(),l.TgZ(4,"td",23),l.TgZ(5,"p"),l._uU(6),l.qZA(),l.qZA(),l.TgZ(7,"td",23),l.YNc(8,M,3,0,"div",24),l.YNc(9,x,2,0,"ng-template",null,25,l.W1O),l.qZA(),l.TgZ(11,"td",23),l.YNc(12,y,3,0,"div",24),l.YNc(13,E,2,0,"ng-template",null,25,l.W1O),l.qZA(),l.TgZ(15,"td",23),l.YNc(16,R,3,0,"div",24),l.YNc(17,N,2,0,"ng-template",null,25,l.W1O),l.qZA(),l.TgZ(19,"td",23),l.YNc(20,I,3,0,"div",24),l.YNc(21,k,2,0,"ng-template",null,25,l.W1O),l.qZA(),l.TgZ(23,"td",23),l.YNc(24,w,3,0,"div",24),l.YNc(25,S,2,0,"ng-template",null,25,l.W1O),l.qZA(),l.TgZ(27,"td",23),l.YNc(28,L,3,0,"div",24),l.YNc(29,C,2,0,"ng-template",null,25,l.W1O),l.qZA(),l.TgZ(31,"td"),l.TgZ(32,"div",26),l.TgZ(33,"button",27),l._UZ(34,"i",28),l.qZA(),l._uU(35,"\xa0 "),l.TgZ(36,"button",29),l.NdJ("click",function(){var e=l.CHM(n).$implicit;return l.oxw().confirmBox("delete",e)}),l.YNc(37,Y,2,0,"span",30),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){var i=t.$implicit,r=l.MAs(10);l.xp6(3),l.Oqu(i.RULE_ID),l.xp6(3),l.Oqu(i.RULE_NAME),l.xp6(2),l.Q6J("ngIf",i.USER_MGMT)("ngIfElse",r),l.xp6(4),l.Q6J("ngIf",i.RULE_MGMT)("ngIfElse",r),l.xp6(4),l.Q6J("ngIf",i.ACTIVITY_MGMT)("ngIfElse",r),l.xp6(4),l.Q6J("ngIf",i.PRODUCT_MGMT)("ngIfElse",r),l.xp6(4),l.Q6J("ngIf",i.CONTENT_MGMT)("ngIfElse",r),l.xp6(4),l.Q6J("ngIf",i.LEADERBOARDS_PAGE)("ngIfElse",r),l.xp6(5),l.MGl("routerLink","edit/",i.RULE_ID,""),l.xp6(3),l.Q6J("disabled",i.isDeleting),l.xp6(1),l.Q6J("ngIf",!i.isDeleting)}}var O=function(e,t){return{itemsPerPage:e,currentPage:t}},D=[{path:"rule-management",component:m,children:[{path:"",component:function(){var t=function(){function t(n,i){e(this,t),this.service=n,this.alertService=i,this.rules=null,this.subs=new c.Y,this.p=1,this.count=10,this.countdata=null}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.subs.add(this.service.getAll().subscribe(function(t){e.rules=t,e.countdata=e.rules.length}))}},{key:"deleteRule",value:function(e){var t=this;this.alertService.loading();var n=this.rules.find(function(t){return t.RULE_ID===e.RULE_ID});this.subs.add(this.service.delete(e.RULE_ID).subscribe(function(){n.isDeleting=!0,t.rules=t.rules.filter(function(t){return t.RULE_ID!==e.RULE_ID}),t.countdata=t.rules.length,t.alertService.success()},function(e){t.alertService.error(e)}))}},{key:"confirmBox",value:function(e,t){var n=this;"delete"==e&&q().fire({title:"Are you sure want to delete?",text:t.RULE_NAME,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(function(e){e.value&&n.deleteRule(t)})}},{key:"ngOnDestroy",value:function(){this.subs.unsubscribe()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l.Y36(Z.P),l.Y36(_.c9))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-rule-management"]],decls:65,vars:12,consts:[[1,"title","d-flex","align-items-center","flex-wrap","mb-30"],[1,"mr-40"],["routerLink","add",1,"main-btn","primary-btn","btn-hover","btn-sm"],[1,"lni","lni-plus","mr-5"],[1,"row"],[1,"col-lg-12"],[1,"card-style","mb-30"],[1,"row","align-items-center"],[1,"col-md-6"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center","py-3"],[1,"left"],[1,"right"],[1,"table-search","d-flex"],["action","#"],["type","text","name","something","placeholder","Search...",3,"ngModel","ngModelChange"],[1,"lni","lni-search-alt"],[1,"table-wrapper","table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[1,"pt-10","d-flex","flex-wrap","justify-content-between"],[1,"text-sm","text-gray"],[1,"text-right"],[3,"pageChange"],[1,"min-width"],[4,"ngIf","ngIfElse"],["deniedAccess",""],[1,"action"],[1,"text-primary",2,"cursor","pointer",3,"routerLink"],[1,"lni","lni-pencil-alt"],[1,"text-danger",3,"disabled","click"],[4,"ngIf"],[1,"status-btn","primary-btn"],[1,"status-btn","secondary-btn"],[1,"lni","lni-trash-can"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"h2",1),l._uU(2,"Rule Management"),l.qZA(),l.TgZ(3,"button",2),l._UZ(4,"i",3),l._uU(5," New Rule"),l.qZA(),l.qZA(),l.TgZ(6,"div",4),l.TgZ(7,"div",5),l.TgZ(8,"div",6),l.TgZ(9,"div",7),l._UZ(10,"div",8),l.qZA(),l.TgZ(11,"div",9),l.TgZ(12,"div",10),l.TgZ(13,"p"),l._uU(14,"Show "),l.TgZ(15,"span"),l._uU(16,"10"),l.qZA(),l._uU(17," entries"),l.qZA(),l.qZA(),l.TgZ(18,"div",11),l.TgZ(19,"div",12),l.TgZ(20,"form",13),l.TgZ(21,"input",14),l.NdJ("ngModelChange",function(e){return t.filterdata=e}),l.qZA(),l.TgZ(22,"button"),l._UZ(23,"i",15),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(24,"div",16),l.TgZ(25,"table",17),l.TgZ(26,"thead"),l.TgZ(27,"tr"),l.TgZ(28,"th"),l.TgZ(29,"h6"),l._uU(30,"Rule ID"),l.qZA(),l.qZA(),l.TgZ(31,"th"),l.TgZ(32,"h6"),l._uU(33,"Rule Name"),l.qZA(),l.qZA(),l.TgZ(34,"th"),l.TgZ(35,"h6"),l._uU(36,"Access User Mgmt"),l.qZA(),l.qZA(),l.TgZ(37,"th"),l.TgZ(38,"h6"),l._uU(39,"Access Rule Mgmt"),l.qZA(),l.qZA(),l.TgZ(40,"th"),l.TgZ(41,"h6"),l._uU(42,"Access Activity"),l.qZA(),l.qZA(),l.TgZ(43,"th"),l.TgZ(44,"h6"),l._uU(45,"Product Mgmt"),l.qZA(),l.qZA(),l.TgZ(46,"th"),l.TgZ(47,"h6"),l._uU(48,"Content Mgmt"),l.qZA(),l.qZA(),l.TgZ(49,"th"),l.TgZ(50,"h6"),l._uU(51,"Access Leaderboards"),l.qZA(),l.qZA(),l.TgZ(52,"th"),l.TgZ(53,"h6"),l._uU(54,"Action"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(55,"tbody"),l.YNc(56,J,38,17,"tr",18),l.ALo(57,"paginate"),l.ALo(58,"filter"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(59,"div",19),l.TgZ(60,"div",10),l.TgZ(61,"p",20),l._uU(62),l.qZA(),l.qZA(),l.TgZ(63,"div",21),l.TgZ(64,"pagination-controls",22),l.NdJ("pageChange",function(e){return t.p=e}),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.xp6(21),l.Q6J("ngModel",t.filterdata),l.xp6(35),l.Q6J("ngForOf",l.xi3(57,3,l.xi3(58,6,t.rules,t.filterdata),l.WLB(9,O,t.count,t.p))),l.xp6(6),l.hij("Total ",t.countdata," Rule Data"))},directives:[o.rH,a._Y,a.JL,a.F,a.Fj,a.JJ,a.On,u.sg,b.LS,u.O5],pipes:[b._s,U.Z],styles:[""]}),t}()},{path:"add",component:A},{path:"edit/:id",component:A}]}],G=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[o.Bz.forChild(D)],o.Bz]}),t}(),B=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[u.ez,G,a.UX,a.u5,b.JX,U.h]]}),t}()}}])}();