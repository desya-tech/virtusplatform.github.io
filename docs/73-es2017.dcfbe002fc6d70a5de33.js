"use strict";(self.webpackChunkappdemo_ng12=self.webpackChunkappdemo_ng12||[]).push([[73],{8073:function(e,t,n){n.r(t),n.d(t,{RuleManagementModule:function(){return D}});var i=n(2224),r=n(30),s=n(8127),o=n(7112),u=n(5688),l=n(7147),a=n(2185),c=n(9168);function Z(e,t){1&e&&(l.TgZ(0,"div",23),l._uU(1,"*rule name required"),l.qZA())}function g(e,t){if(1&e&&(l.TgZ(0,"div"),l.YNc(1,Z,2,0,"div",22),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("ngIf",e.f.RULE_NAME.errors.required)}}function d(e,t){1&e&&l._UZ(0,"span")}const h=function(e){return{"is-invalid":e}};let p=(()=>{class e{constructor(e,t,n,i,r){this.formBuilder=e,this.route=t,this.router=n,this.ruleService=i,this.alertService=r,this.subs=new u.Y,this.loading=!1,this.submitted=!1}ngOnInit(){this.id=this.route.snapshot.params.id,this.isAddMode=!this.id,this.form=this.formBuilder.group({RULE_NAME:["",s.kI.required],USER_MGMT:[""],RULE_MGMT:[""],ACTIVITY_MGMT:[""],LEADERBOARDS_PAGE:[""],PRODUCT_MGMT:[""],CONTENT_MGMT:[""]}),this.isAddMode||this.subs.add(this.ruleService.getByID(this.id).subscribe(e=>this.form.patchValue(e)))}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.isAddMode?(this.form.value.RULE_ID=this.form.value.RULE_NAME.replace(/ .*/,"").replace(/[aeiou]/gi,"").toUpperCase()+"00"+this.getRandomInt(10),this.createRole()):this.updateRule())}createRole(){this.alertService.loading(),this.subs.add(this.ruleService.register(this.form.value).pipe((0,o.P)()).subscribe({next:()=>{this.alertService.success(),this.router.navigate(["../"],{relativeTo:this.route})},error:e=>{this.alertService.error(e),this.loading=!1}}))}updateRule(){this.alertService.loading(),this.subs.add(this.ruleService.update(this.id,this.form.value).pipe((0,o.P)()).subscribe({next:()=>{this.alertService.success(),this.router.navigate(["../../"],{relativeTo:this.route})},error:e=>{this.alertService.error(e),this.loading=!1}}))}getRandomInt(e){return Math.floor(Math.random()*e)}ngOnDestroy(){this.subs.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(s.qu),l.Y36(r.gz),l.Y36(r.F0),l.Y36(a.P),l.Y36(c.c))},e.\u0275cmp=l.Xpm({type:e,selectors:[["ng-component"]],decls:58,vars:7,consts:[[1,"title","d-flex","align-items-center","flex-wrap","mb-30"],[1,"mr-40"],["routerLink","/roles",1,"main-btn","primary-btn-outline","rounded-btn","btn-hover"],[1,"lni","lni-chevron-left","mr-5"],[1,"row"],[3,"formGroup","ngSubmit"],[1,"col-lg-6"],[1,"card-style","mb-30"],[1,"divider"],[1,"input-style-1"],["type","text","formControlName","RULE_NAME",3,"ngClass"],[4,"ngIf"],[1,"form-check","form-switch","toggle-switch","mb-30"],["formControlName","USER_MGMT","type","checkbox","id","toggleSwitch1",1,"form-check-input"],["for","toggleSwitch1",1,"form-check-label"],["formControlName","RULE_MGMT","type","checkbox","id","toggleSwitch1",1,"form-check-input"],["formControlName","ACTIVITY_MGMT","type","checkbox","id","toggleSwitch1",1,"form-check-input"],["formControlName","PRODUCT_MGMT","type","checkbox","id","toggleSwitch1",1,"form-check-input"],["formControlName","CONTENT_MGMT","type","checkbox","id","toggleSwitch1",1,"form-check-input"],["formControlName","LEADERBOARDS_PAGE","type","checkbox","id","toggleSwitch1",1,"form-check-input"],["routerLink","/rule-management",1,"main-btn","primary-btn-outline","rounded-btn","btn-hover"],[1,"main-btn","primary-btn","rounded-btn","btn-hover",3,"disabled"],["style","color:red",4,"ngIf"],[2,"color","red"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"h2",1),l._uU(2,"New Rule"),l.qZA(),l.TgZ(3,"button",2),l._UZ(4,"i",3),l._uU(5,"Back"),l.qZA(),l.qZA(),l.TgZ(6,"div",4),l.TgZ(7,"form",5),l.NdJ("ngSubmit",function(){return t.onSubmit()}),l.TgZ(8,"div",6),l.TgZ(9,"div",7),l.TgZ(10,"h5"),l._uU(11,"Rule Description"),l.qZA(),l.TgZ(12,"span",8),l._UZ(13,"hr"),l.qZA(),l.TgZ(14,"div",9),l.TgZ(15,"label"),l._uU(16," Role Name "),l.qZA(),l._UZ(17,"input",10),l.YNc(18,g,2,1,"div",11),l.qZA(),l.TgZ(19,"span",8),l._UZ(20,"hr"),l.qZA(),l.TgZ(21,"h5"),l._uU(22,"Rule Permission"),l.qZA(),l.TgZ(23,"span",8),l._UZ(24,"hr"),l.qZA(),l.TgZ(25,"div",12),l._UZ(26,"input",13),l.TgZ(27,"label",14),l._uU(28,"User Management"),l.qZA(),l.qZA(),l.TgZ(29,"div",12),l._UZ(30,"input",15),l.TgZ(31,"label",14),l._uU(32,"Rule Management"),l.qZA(),l.qZA(),l.TgZ(33,"div",12),l._UZ(34,"input",16),l.TgZ(35,"label",14),l._uU(36,"Activity Management"),l.qZA(),l.qZA(),l.TgZ(37,"div",12),l._UZ(38,"input",17),l.TgZ(39,"label",14),l._uU(40,"Product Management"),l.qZA(),l.qZA(),l.TgZ(41,"div",12),l._UZ(42,"input",18),l.TgZ(43,"label",14),l._uU(44,"Content Management"),l.qZA(),l.qZA(),l.TgZ(45,"div",12),l._UZ(46,"input",19),l.TgZ(47,"label",14),l._uU(48,"Access Leaderboards"),l.qZA(),l.qZA(),l.TgZ(49,"span",8),l._UZ(50,"hr"),l.qZA(),l.TgZ(51,"div"),l.TgZ(52,"button",20),l._uU(53," Cancel "),l.qZA(),l._uU(54,"\xa0 "),l.TgZ(55,"button",21),l.YNc(56,d,1,0,"span",11),l._uU(57," \xa0Save\xa0 "),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.xp6(7),l.Q6J("formGroup",t.form),l.xp6(10),l.Q6J("ngClass",l.VKq(5,h,t.submitted&&t.f.RULE_NAME.errors)),l.xp6(1),l.Q6J("ngIf",t.submitted&&t.f.RULE_NAME.errors),l.xp6(37),l.Q6J("disabled",t.loading),l.xp6(1),l.Q6J("ngIf",t.loading))},directives:[r.rH,s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,i.mk,i.O5,s.Wl],encapsulation:2}),e})(),T=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&l._UZ(0,"router-outlet")},directives:[r.lC],encapsulation:2}),e})();var A=n(4693),m=n.n(A),f=n(1569),q=n(7333),_=n(4968);function b(e,t){1&e&&(l.TgZ(0,"div"),l.TgZ(1,"span",31),l._uU(2,"True"),l.qZA(),l.qZA())}function U(e,t){1&e&&(l.TgZ(0,"span",32),l._uU(1,"False"),l.qZA())}function v(e,t){1&e&&(l.TgZ(0,"div"),l.TgZ(1,"span",31),l._uU(2,"True"),l.qZA(),l.qZA())}function M(e,t){1&e&&(l.TgZ(0,"span",32),l._uU(1,"False"),l.qZA())}function x(e,t){1&e&&(l.TgZ(0,"div"),l.TgZ(1,"span",31),l._uU(2,"True"),l.qZA(),l.qZA())}function R(e,t){1&e&&(l.TgZ(0,"span",32),l._uU(1,"False"),l.qZA())}function E(e,t){1&e&&(l.TgZ(0,"div"),l.TgZ(1,"span",31),l._uU(2,"True"),l.qZA(),l.qZA())}function N(e,t){1&e&&(l.TgZ(0,"span",32),l._uU(1,"False"),l.qZA())}function I(e,t){1&e&&(l.TgZ(0,"div"),l.TgZ(1,"span",31),l._uU(2,"True"),l.qZA(),l.qZA())}function S(e,t){1&e&&(l.TgZ(0,"span",32),l._uU(1,"False"),l.qZA())}function w(e,t){1&e&&(l.TgZ(0,"div"),l.TgZ(1,"span",31),l._uU(2,"True"),l.qZA(),l.qZA())}function y(e,t){1&e&&(l.TgZ(0,"span",32),l._uU(1,"False"),l.qZA())}function L(e,t){1&e&&(l.TgZ(0,"span"),l._UZ(1,"i",33),l.qZA())}function C(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"tr"),l.TgZ(1,"td",23),l.TgZ(2,"p"),l._uU(3),l.qZA(),l.qZA(),l.TgZ(4,"td",23),l.TgZ(5,"p"),l._uU(6),l.qZA(),l.qZA(),l.TgZ(7,"td",23),l.YNc(8,b,3,0,"div",24),l.YNc(9,U,2,0,"ng-template",null,25,l.W1O),l.qZA(),l.TgZ(11,"td",23),l.YNc(12,v,3,0,"div",24),l.YNc(13,M,2,0,"ng-template",null,25,l.W1O),l.qZA(),l.TgZ(15,"td",23),l.YNc(16,x,3,0,"div",24),l.YNc(17,R,2,0,"ng-template",null,25,l.W1O),l.qZA(),l.TgZ(19,"td",23),l.YNc(20,E,3,0,"div",24),l.YNc(21,N,2,0,"ng-template",null,25,l.W1O),l.qZA(),l.TgZ(23,"td",23),l.YNc(24,I,3,0,"div",24),l.YNc(25,S,2,0,"ng-template",null,25,l.W1O),l.qZA(),l.TgZ(27,"td",23),l.YNc(28,w,3,0,"div",24),l.YNc(29,y,2,0,"ng-template",null,25,l.W1O),l.qZA(),l.TgZ(31,"td"),l.TgZ(32,"div",26),l.TgZ(33,"button",27),l._UZ(34,"i",28),l.qZA(),l._uU(35,"\xa0 "),l.TgZ(36,"button",29),l.NdJ("click",function(){const t=l.CHM(e).$implicit;return l.oxw().confirmBox("delete",t)}),l.YNc(37,L,2,0,"span",30),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=t.$implicit,n=l.MAs(10);l.xp6(3),l.Oqu(e.RULE_ID),l.xp6(3),l.Oqu(e.RULE_NAME),l.xp6(2),l.Q6J("ngIf",e.USER_MGMT)("ngIfElse",n),l.xp6(4),l.Q6J("ngIf",e.RULE_MGMT)("ngIfElse",n),l.xp6(4),l.Q6J("ngIf",e.ACTIVITY_MGMT)("ngIfElse",n),l.xp6(4),l.Q6J("ngIf",e.PRODUCT_MGMT)("ngIfElse",n),l.xp6(4),l.Q6J("ngIf",e.CONTENT_MGMT)("ngIfElse",n),l.xp6(4),l.Q6J("ngIf",e.LEADERBOARDS_PAGE)("ngIfElse",n),l.xp6(5),l.MGl("routerLink","edit/",e.RULE_ID,""),l.xp6(3),l.Q6J("disabled",e.isDeleting),l.xp6(1),l.Q6J("ngIf",!e.isDeleting)}}const Y=function(e,t){return{itemsPerPage:e,currentPage:t}},J=[{path:"rule-management",component:T,children:[{path:"",component:(()=>{class e{constructor(e,t){this.service=e,this.alertService=t,this.rules=null,this.subs=new u.Y,this.p=1,this.count=10,this.countdata=null}ngOnInit(){this.subs.add(this.service.getAll().subscribe(e=>{this.rules=e,this.countdata=this.rules.length}))}deleteRule(e){this.alertService.loading();const t=this.rules.find(t=>t.RULE_ID===e.RULE_ID);this.subs.add(this.service.delete(e.RULE_ID).subscribe(()=>{t.isDeleting=!0,this.rules=this.rules.filter(t=>t.RULE_ID!==e.RULE_ID),this.countdata=this.rules.length,this.alertService.success()},e=>{this.alertService.error(e)}))}confirmBox(e,t){"delete"==e&&m().fire({title:"Are you sure want to delete?",text:t.RULE_NAME,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(e=>{e.value&&this.deleteRule(t)})}ngOnDestroy(){this.subs.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(a.P),l.Y36(f.c9))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-rule-management"]],decls:65,vars:12,consts:[[1,"title","d-flex","align-items-center","flex-wrap","mb-30"],[1,"mr-40"],["routerLink","add",1,"main-btn","primary-btn","btn-hover","btn-sm"],[1,"lni","lni-plus","mr-5"],[1,"row"],[1,"col-lg-12"],[1,"card-style","mb-30"],[1,"row","align-items-center"],[1,"col-md-6"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center","py-3"],[1,"left"],[1,"right"],[1,"table-search","d-flex"],["action","#"],["type","text","name","something","placeholder","Search...",3,"ngModel","ngModelChange"],[1,"lni","lni-search-alt"],[1,"table-wrapper","table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[1,"pt-10","d-flex","flex-wrap","justify-content-between"],[1,"text-sm","text-gray"],[1,"text-right"],[3,"pageChange"],[1,"min-width"],[4,"ngIf","ngIfElse"],["deniedAccess",""],[1,"action"],[1,"text-primary",2,"cursor","pointer",3,"routerLink"],[1,"lni","lni-pencil-alt"],[1,"text-danger",3,"disabled","click"],[4,"ngIf"],[1,"status-btn","primary-btn"],[1,"status-btn","secondary-btn"],[1,"lni","lni-trash-can"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"h2",1),l._uU(2,"Rule Management"),l.qZA(),l.TgZ(3,"button",2),l._UZ(4,"i",3),l._uU(5," New Rule"),l.qZA(),l.qZA(),l.TgZ(6,"div",4),l.TgZ(7,"div",5),l.TgZ(8,"div",6),l.TgZ(9,"div",7),l._UZ(10,"div",8),l.qZA(),l.TgZ(11,"div",9),l.TgZ(12,"div",10),l.TgZ(13,"p"),l._uU(14,"Show "),l.TgZ(15,"span"),l._uU(16,"10"),l.qZA(),l._uU(17," entries"),l.qZA(),l.qZA(),l.TgZ(18,"div",11),l.TgZ(19,"div",12),l.TgZ(20,"form",13),l.TgZ(21,"input",14),l.NdJ("ngModelChange",function(e){return t.filterdata=e}),l.qZA(),l.TgZ(22,"button"),l._UZ(23,"i",15),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(24,"div",16),l.TgZ(25,"table",17),l.TgZ(26,"thead"),l.TgZ(27,"tr"),l.TgZ(28,"th"),l.TgZ(29,"h6"),l._uU(30,"Rule ID"),l.qZA(),l.qZA(),l.TgZ(31,"th"),l.TgZ(32,"h6"),l._uU(33,"Rule Name"),l.qZA(),l.qZA(),l.TgZ(34,"th"),l.TgZ(35,"h6"),l._uU(36,"Access User Mgmt"),l.qZA(),l.qZA(),l.TgZ(37,"th"),l.TgZ(38,"h6"),l._uU(39,"Access Rule Mgmt"),l.qZA(),l.qZA(),l.TgZ(40,"th"),l.TgZ(41,"h6"),l._uU(42,"Access Activity"),l.qZA(),l.qZA(),l.TgZ(43,"th"),l.TgZ(44,"h6"),l._uU(45,"Product Mgmt"),l.qZA(),l.qZA(),l.TgZ(46,"th"),l.TgZ(47,"h6"),l._uU(48,"Content Mgmt"),l.qZA(),l.qZA(),l.TgZ(49,"th"),l.TgZ(50,"h6"),l._uU(51,"Access Leaderboards"),l.qZA(),l.qZA(),l.TgZ(52,"th"),l.TgZ(53,"h6"),l._uU(54,"Action"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(55,"tbody"),l.YNc(56,C,38,17,"tr",18),l.ALo(57,"paginate"),l.ALo(58,"filter"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(59,"div",19),l.TgZ(60,"div",10),l.TgZ(61,"p",20),l._uU(62),l.qZA(),l.qZA(),l.TgZ(63,"div",21),l.TgZ(64,"pagination-controls",22),l.NdJ("pageChange",function(e){return t.p=e}),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.xp6(21),l.Q6J("ngModel",t.filterdata),l.xp6(35),l.Q6J("ngForOf",l.xi3(57,3,l.xi3(58,6,t.rules,t.filterdata),l.WLB(9,Y,t.count,t.p))),l.xp6(6),l.hij("Total ",t.countdata," Rule Data"))},directives:[r.rH,s._Y,s.JL,s.F,s.Fj,s.JJ,s.On,i.sg,q.LS,i.O5],pipes:[q._s,_.Z],styles:[""]}),e})()},{path:"add",component:p},{path:"edit/:id",component:p}]}];let k=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[r.Bz.forChild(J)],r.Bz]}),e})(),D=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[i.ez,k,s.UX,s.u5,q.JX,_.h]]}),e})()}}]);