!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}(self.webpackChunkappdemo_ng12=self.webpackChunkappdemo_ng12||[]).push([[103],{6103:function(t,n,r){r.r(n),r.d(n,{UserManagementModule:function(){return le}});var s,o=r(8127),a=r(2224),u=r(30),l=r(7112),c=r(5688),d=r(1037),g=r(7147),f=r(4037),p=r(1569),Z=r(2185),A=r(7393),m=r(5342),h=((s=function(){function t(i){e(this,t),this.http=i}return i(t,[{key:"getAll",value:function(){return this.http.get("".concat(d.N.apiUrl,"/contact"))}},{key:"getByID",value:function(e){return this.http.get("".concat(d.N.apiUrl,"/contact/").concat(e))}},{key:"getByCompany",value:function(e){return this.http.get("".concat(d.N.apiUrl,"/contact/getbycompany/").concat(e))}}]),t}()).\u0275fac=function(e){return new(e||s)(g.LFG(m.eN))},s.\u0275prov=g.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s),v=r(3546),T=r(2016);function b(e,t){1&e&&(g.TgZ(0,"h2",27),g._uU(1,"New Users"),g.qZA())}function q(e,t){1&e&&(g.TgZ(0,"h2",27),g._uU(1,"Edit Users"),g.qZA())}function N(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"div",22),g.TgZ(1,"label"),g._uU(2,"Company"),g.qZA(),g.TgZ(3,"ng-select",28),g.NdJ("change",function(e){return g.CHM(i),g.oxw().onCompanySelected(e)}),g.qZA(),g.qZA()}if(2&e){var n=g.oxw();g.xp6(3),g.Q6J("items",n.bp)("multiple",!1)}}function _(e,t){1&e&&(g.TgZ(0,"div",11),g.TgZ(1,"label"),g._uU(2,"Company"),g.qZA(),g._UZ(3,"input",29),g.qZA())}var x=function(){return{standalone:!0}};function I(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"div",22),g.TgZ(1,"label"),g._uU(2,"Email"),g.qZA(),g.TgZ(3,"ng-select",30),g.NdJ("change",function(e){return g.CHM(i),g.oxw().onSelection(e)})("ngModelChange",function(e){return g.CHM(i),g.oxw().selectemail=e}),g.qZA(),g.qZA()}if(2&e){var n=g.oxw();g.xp6(3),g.Q6J("items",n.contact)("multiple",!1)("ngModel",n.selectemail)("ngModelOptions",g.DdM(4,x))}}function C(e,t){1&e&&(g.TgZ(0,"div",11),g.TgZ(1,"label"),g._uU(2,"USERNAME"),g.qZA(),g._UZ(3,"input",31),g.qZA())}function S(e,t){1&e&&(g.TgZ(0,"em"),g._uU(1,"(Default Password is email)"),g.qZA())}function U(e,t){1&e&&(g.TgZ(0,"div",35),g._uU(1,"Password is required"),g.qZA())}function M(e,t){1&e&&(g.TgZ(0,"div",35),g._uU(1,"Password must be at least 6 characters"),g.qZA())}function E(e,t){if(1&e&&(g.TgZ(0,"div"),g.YNc(1,U,2,0,"div",34),g.YNc(2,M,2,0,"div",34),g.qZA()),2&e){var i=g.oxw(2);g.xp6(1),g.Q6J("ngIf",i.f.PASSWORD.errors.required),g.xp6(1),g.Q6J("ngIf",i.f.PASSWORD.errors.minlength)}}var y=function(e){return{"is-invalid":e}};function O(e,t){if(1&e&&(g.TgZ(0,"div",11),g.TgZ(1,"label",32),g._uU(2," Password "),g.YNc(3,S,2,0,"em",13),g.qZA(),g._UZ(4,"input",33),g.YNc(5,E,3,2,"div",13),g.qZA()),2&e){var i=g.oxw();g.xp6(3),g.Q6J("ngIf",i.isAddMode),g.xp6(1),g.Q6J("ngClass",g.VKq(3,y,i.submitted&&i.f.PASSWORD.errors)),g.xp6(1),g.Q6J("ngIf",i.submitted&&i.f.PASSWORD.errors)}}function P(e,t){1&e&&(g.TgZ(0,"div",35),g._uU(1,"*First Name required"),g.qZA())}function w(e,t){if(1&e&&(g.TgZ(0,"div"),g.YNc(1,P,2,0,"div",34),g.qZA()),2&e){var i=g.oxw();g.xp6(1),g.Q6J("ngIf",i.f.FIRST_NAME.errors.required)}}function Y(e,t){1&e&&(g.TgZ(0,"div",35),g._uU(1,"*Last Name required"),g.qZA())}function k(e,t){if(1&e&&(g.TgZ(0,"div"),g.YNc(1,Y,2,0,"div",34),g.qZA()),2&e){var i=g.oxw();g.xp6(1),g.Q6J("ngIf",i.f.LAST_NAME.errors.required)}}function J(e,t){1&e&&(g.TgZ(0,"div",35),g._uU(1,"*Phone No. required"),g.qZA())}function D(e,t){if(1&e&&(g.TgZ(0,"div"),g.YNc(1,J,2,0,"div",34),g.qZA()),2&e){var i=g.oxw();g.xp6(1),g.Q6J("ngIf",i.f.PHONE.errors.required)}}function R(e,t){1&e&&(g.TgZ(0,"div",41),g._UZ(1,"div",42),g.qZA())}function F(e,t){1&e&&(g.TgZ(0,"div",43),g._uU(1," Image Uploaded Succesfuly!"),g.qZA())}function Q(e,t){1&e&&(g.TgZ(0,"div",44),g._uU(1," Image Upload Failed!"),g.qZA())}var L=function(e){return{"background-image":e}};function B(e,t){if(1&e&&(g.TgZ(0,"div",36),g._UZ(1,"div",37),g.YNc(2,R,2,0,"div",38),g.YNc(3,F,2,0,"div",39),g.YNc(4,Q,2,0,"div",40),g.qZA()),2&e){var i=g.oxw();g.xp6(1),g.Gre("img-preview","fail"===i.selectedFile.status?"-error":"",""),g.Q6J("ngStyle",g.VKq(7,L,"url("+i.selectedFile.src+")")),g.xp6(1),g.Q6J("ngIf",i.selectedFile.pending),g.xp6(1),g.Q6J("ngIf","ok"===i.selectedFile.status),g.xp6(1),g.Q6J("ngIf","fail"===i.selectedFile.status)}}function V(e,t){1&e&&(g.TgZ(0,"div",35),g._uU(1,"*Picture required"),g.qZA())}function H(e,t){if(1&e&&(g.TgZ(0,"div"),g.YNc(1,V,2,0,"div",34),g.qZA()),2&e){var i=g.oxw();g.xp6(1),g.Q6J("ngIf",i.f.PICTURE.errors.required)}}function W(e,t){1&e&&(g.TgZ(0,"div",35),g._uU(1,"*Discord ID required"),g.qZA())}function K(e,t){if(1&e&&(g.TgZ(0,"div"),g.YNc(1,W,2,0,"div",34),g.qZA()),2&e){var i=g.oxw();g.xp6(1),g.Q6J("ngIf",i.f.DISCORD_ID.errors.required)}}function j(e,t){if(1&e&&(g.TgZ(0,"option",45),g._uU(1),g.qZA()),2&e){var i=t.$implicit;g.s9C("value",i.RULE_ID),g.xp6(1),g.Oqu(i.RULE_NAME)}}function G(e,t){1&e&&g._UZ(0,"span")}var z=function t(i,n){e(this,t),this.src=i,this.file=n,this.pending=!1,this.status="init"},X=function(){var t=function(){function t(i,n,r,s,o,a,u,l,g){e(this,t),this.formBuilder=i,this.route=n,this.router=r,this.usersService=s,this.alertService=o,this.ruleManagementService=a,this.bpService=u,this.contactService=l,this.imageService=g,this.subs=new c.Y,this.loading=!1,this.submitted=!1,this.selectedBPName=null,this.rules=null,this.bp=null,this.contact=null,this.apiurl=d.N.apiUrl,this.selectemail=null}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.id=this.route.snapshot.params.id,this.isAddMode=!this.id;var t=[o.kI.minLength(6)];this.isAddMode&&t.push(o.kI.required),this.form=this.formBuilder.group({USERNAME:["",o.kI.required],PASSWORD:["",t],FIRST_NAME:["",o.kI.required],LAST_NAME:["",o.kI.required],COMPANY_ID:["",o.kI.required],COMPANY_NAME:["",o.kI.required],PHONE:["",o.kI.required],BIO:["",o.kI.required],PICTURE:["",o.kI.required],RULE_ID:["",o.kI.required],DISCORD_ID:["",o.kI.required]}),this.isAddMode||this.subs.add(this.usersService.getById(this.id).pipe((0,l.P)()).subscribe(function(t){e.form.patchValue(t)})),this.subs.add(this.ruleManagementService.getAll().subscribe(function(t){return e.rules=t})),this.subs.add(this.bpService.getAll().subscribe(function(t){return e.bp=t}))}},{key:"f",get:function(){return this.form.controls}},{key:"onSubmit",value:function(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.isAddMode?this.createUser():this.updateUser())}},{key:"onCompanySelected",value:function(e){var t=this;this.subs.add(this.contactService.getByCompany(e.COMPANY_ID).subscribe(function(e){return t.contact=e})),this.form.get("COMPANY_ID").setValue(e.COMPANY_ID),this.form.get("COMPANY_NAME").setValue(e.COMPANY_NAME),this.setEmptyvalue()}},{key:"onSelection",value:function(e){1==e.CONTACT_NAME.split(" ").length?this.form.get("FIRST_NAME").setValue(e.CONTACT_NAME):this.form.get("FIRST_NAME").setValue(e.CONTACT_NAME.substr(0,e.CONTACT_NAME.indexOf(" "))),""!=e.CONTACT_NAME.substr(e.CONTACT_NAME.indexOf(" ")+1)?this.form.get("LAST_NAME").setValue(e.CONTACT_NAME.substr(e.CONTACT_NAME.indexOf(" ")+1)):this.form.get("LAST_NAME").setValue(e.CONTACT_NAME.substr(0,e.CONTACT_NAME.indexOf(" "))),this.form.get("PASSWORD").setValue(e.EMAIL),this.form.get("USERNAME").setValue(e.EMAIL),this.form.get("PHONE").setValue(e.PHONE01)}},{key:"createUser",value:function(){var e=this;this.alertService.loading(),this.subs.add(this.usersService.register(this.form.value).pipe((0,l.P)()).subscribe({next:function(){e.alertService.success(),e.router.navigate(["../"],{relativeTo:e.route})},error:function(t){e.alertService.error(t),e.loading=!1}}))}},{key:"updateUser",value:function(){var e=this;this.alertService.loading(),this.subs.add(this.usersService.update(this.id,this.form.value).pipe((0,l.P)()).subscribe({next:function(){e.alertService.success(),e.router.navigate(["../../"],{relativeTo:e.route})},error:function(t){e.alertService.error(t),e.loading=!1}}))}},{key:"onSuccess",value:function(){this.selectedFile.pending=!1,this.selectedFile.status="ok"}},{key:"onError",value:function(){this.selectedFile.pending=!1,this.selectedFile.status="fail",this.selectedFile.src=""}},{key:"processFile",value:function(e){var t=this,i=e.files[0],n=new FileReader;this.form.value.PICTURE&&this.imageService.deleteImage(this.form.value.PICTURE).pipe((0,l.P)()).subscribe(),n.addEventListener("load",function(e){t.selectedFile=new z(e.target.result,i),t.imageService.uploadImage(t.selectedFile.file).subscribe(function(e){t.form.get("PICTURE").setValue(e.filename),t.onSuccess()},function(e){t.onError()})}),n.readAsDataURL(i)}},{key:"setEmptyvalue",value:function(){this.form.get("FIRST_NAME").setValue(""),this.form.get("LAST_NAME").setValue(""),this.form.get("PHONE").setValue(""),this.form.get("BIO").setValue(""),this.form.get("DISCORD_ID").setValue(""),this.form.get("PASSWORD").setValue(""),this.selectemail=""}},{key:"ngOnDestroy",value:function(){this.subs.unsubscribe()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(g.Y36(o.qu),g.Y36(u.gz),g.Y36(u.F0),g.Y36(f.x),g.Y36(p.c9),g.Y36(Z.P),g.Y36(A.m),g.Y36(h),g.Y36(v.C))},t.\u0275cmp=g.Xpm({type:t,selectors:[["ng-component"]],decls:67,vars:35,consts:[[1,"title","d-flex","align-items-center","flex-wrap","mb-30"],["class","mr-40",4,"ngIf"],["routerLink","/user-management",1,"main-btn","primary-btn-outline","rounded-btn","btn-hover"],[1,"lni","lni-chevron-left","mr-5"],[1,"row"],[3,"formGroup","ngSubmit"],[1,"col-lg-6"],[1,"card-style","mb-30"],[1,"divider"],["class","select-style-1",4,"ngIf"],["class","input-style-1",4,"ngIf"],[1,"input-style-1"],["type","text","formControlName","FIRST_NAME","disabled","",3,"ngClass"],[4,"ngIf"],["type","text","formControlName","LAST_NAME","disabled","",3,"ngClass"],["type","text","formControlName","PHONE","disabled","",3,"ngClass"],["formControlName","BIO","placeholder","Message","rows","5",3,"ngClass"],["type","file","accept","image/*",3,"change"],["imageInput",""],["class","img-preview-container",4,"ngIf"],["type","text","formControlName","PICTURE","disabled","",3,"ngClass"],["type","number","formControlName","DISCORD_ID",3,"ngClass"],[1,"select-style-1"],[1,"select-position"],["formControlName","RULE_ID"],[3,"value",4,"ngFor","ngForOf"],[1,"main-btn","primary-btn","rounded-btn","btn-hover",3,"disabled"],[1,"mr-40"],["bindLabel","COMPANY_NAME","placeholder","Search Company","appendTo","body",3,"items","multiple","change"],["type","text","formControlName","COMPANY_NAME","disabled",""],["bindLabel","EMAIL","placeholder","Search Email","appendTo","body",3,"items","multiple","ngModel","ngModelOptions","change","ngModelChange"],["type","text","formControlName","USERNAME","disabled",""],["for","PASSWORD"],["type","password","formControlName","PASSWORD",3,"ngClass"],["style","color:red",4,"ngIf"],[2,"color","red"],[1,"img-preview-container"],[3,"ngStyle"],["class","img-loading-overlay",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"img-loading-overlay"],[1,"img-spinning-circle"],[1,"alert","alert-success"],[1,"alert","alert-danger"],[3,"value"]],template:function(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"div",0),g.YNc(1,b,2,0,"h2",1),g.YNc(2,q,2,0,"h2",1),g.TgZ(3,"button",2),g._UZ(4,"i",3),g._uU(5,"Back"),g.qZA(),g.qZA(),g.TgZ(6,"div",4),g.TgZ(7,"form",5),g.NdJ("ngSubmit",function(){return t.onSubmit()}),g.TgZ(8,"div",6),g.TgZ(9,"div",7),g.TgZ(10,"h5"),g._uU(11,"User Description"),g.qZA(),g.TgZ(12,"span",8),g._UZ(13,"hr"),g.qZA(),g.YNc(14,N,4,2,"div",9),g.YNc(15,_,4,0,"div",10),g.YNc(16,I,4,5,"div",9),g.YNc(17,C,4,0,"div",10),g.YNc(18,O,6,5,"div",10),g.TgZ(19,"div",11),g.TgZ(20,"label"),g._uU(21,"First Name"),g.qZA(),g._UZ(22,"input",12),g.YNc(23,w,2,1,"div",13),g.qZA(),g.TgZ(24,"div",11),g.TgZ(25,"label"),g._uU(26,"Last Name"),g.qZA(),g._UZ(27,"input",14),g.YNc(28,k,2,1,"div",13),g.qZA(),g.TgZ(29,"div",11),g.TgZ(30,"label"),g._uU(31,"Phone No."),g.qZA(),g._UZ(32,"input",15),g.YNc(33,D,2,1,"div",13),g.qZA(),g.TgZ(34,"div",11),g.TgZ(35,"label"),g._uU(36,"Bio"),g.qZA(),g._UZ(37,"textarea",16),g.qZA(),g.TgZ(38,"div",11),g.TgZ(39,"label"),g._uU(40,"Select Image"),g.qZA(),g.TgZ(41,"input",17,18),g.NdJ("change",function(){g.CHM(i);var e=g.MAs(42);return t.processFile(e)}),g.qZA(),g.qZA(),g.YNc(43,B,5,9,"div",19),g.TgZ(44,"div",11),g.TgZ(45,"label"),g._uU(46,"Picture"),g.qZA(),g._UZ(47,"input",20),g.YNc(48,H,2,1,"div",13),g.qZA(),g.TgZ(49,"div",11),g.TgZ(50,"label"),g._uU(51,"Discord ID"),g.qZA(),g._UZ(52,"input",21),g.YNc(53,K,2,1,"div",13),g.qZA(),g.TgZ(54,"div",22),g.TgZ(55,"label"),g._uU(56,"Role"),g.qZA(),g.TgZ(57,"div",23),g.TgZ(58,"select",24),g.YNc(59,j,2,2,"option",25),g.qZA(),g.qZA(),g.qZA(),g.TgZ(60,"div"),g.TgZ(61,"button",2),g._uU(62," Cancel "),g.qZA(),g._uU(63,"\xa0 "),g.TgZ(64,"button",26),g.YNc(65,G,1,0,"span",13),g._uU(66," \xa0Save\xa0 "),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()}2&e&&(g.xp6(1),g.Q6J("ngIf",t.isAddMode),g.xp6(1),g.Q6J("ngIf",!t.isAddMode),g.xp6(5),g.Q6J("formGroup",t.form),g.xp6(7),g.Q6J("ngIf",t.isAddMode),g.xp6(1),g.Q6J("ngIf",!t.isAddMode),g.xp6(1),g.Q6J("ngIf",t.isAddMode),g.xp6(1),g.Q6J("ngIf",!t.isAddMode),g.xp6(1),g.Q6J("ngIf",t.isAddMode),g.xp6(4),g.Q6J("ngClass",g.VKq(23,y,t.submitted&&t.f.FIRST_NAME.errors)),g.xp6(1),g.Q6J("ngIf",t.submitted&&t.f.FIRST_NAME.errors),g.xp6(4),g.Q6J("ngClass",g.VKq(25,y,t.submitted&&t.f.LAST_NAME.errors)),g.xp6(1),g.Q6J("ngIf",t.submitted&&t.f.LAST_NAME.errors),g.xp6(4),g.Q6J("ngClass",g.VKq(27,y,t.submitted&&t.f.PHONE.errors)),g.xp6(1),g.Q6J("ngIf",t.submitted&&t.f.PHONE.errors),g.xp6(4),g.Q6J("ngClass",g.VKq(29,y,t.submitted&&t.f.BIO.errors)),g.xp6(6),g.Q6J("ngIf",t.selectedFile),g.xp6(4),g.Q6J("ngClass",g.VKq(31,y,t.submitted&&t.f.PICTURE.errors)),g.xp6(1),g.Q6J("ngIf",t.submitted&&t.f.PICTURE.errors),g.xp6(4),g.Q6J("ngClass",g.VKq(33,y,t.submitted&&t.f.DISCORD_ID.errors)),g.xp6(1),g.Q6J("ngIf",t.submitted&&t.f.DISCORD_ID.errors),g.xp6(6),g.Q6J("ngForOf",t.rules),g.xp6(5),g.Q6J("disabled",t.loading),g.xp6(1),g.Q6J("ngIf",t.loading))},directives:[a.O5,u.rH,o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,a.mk,o.wV,o.EJ,a.sg,T.w9,o.On,a.PC,o.YN,o.Kr],styles:['.image-upload-container[_ngcontent-%COMP%]{cursor:pointer}.img-preview-container[_ngcontent-%COMP%]{background-color:#f7f7f7;position:relative}.img-preview-container[_ngcontent-%COMP%]   .img-preview[_ngcontent-%COMP%]{background:center center no-repeat;background-size:contain;height:116px;width:116px}.img-preview-container[_ngcontent-%COMP%]   .img-preview-error[_ngcontent-%COMP%]{display:none}.img-loading-overlay[_ngcontent-%COMP%]{background-color:#000;bottom:0;left:0;opacity:.2;position:absolute;right:0;top:0}.img-spinning-circle[_ngcontent-%COMP%]{display:inline-block;width:64px;height:64px;margin:auto;position:absolute;top:0;left:0;bottom:0;right:0}.img-spinning-circle[_ngcontent-%COMP%]:after{content:" ";display:block;width:46px;height:46px;margin:1px;border-radius:50%;border:5px solid #fff;border-color:#fff transparent #fff transparent;-webkit-animation:lds-dual-ring 1.2s linear infinite;animation:lds-dual-ring 1.2s linear infinite}@-webkit-keyframes lds-dual-ring{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes lds-dual-ring{0%{transform:rotate(0)}to{transform:rotate(360deg)}}']}),t}(),$=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=g.Xpm({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&g._UZ(0,"router-outlet")},directives:[u.lC],encapsulation:2}),t}(),ee=r(4693),te=r.n(ee),ie=r(7333),ne=r(4968);function re(e,t){1&e&&(g.TgZ(0,"span"),g._UZ(1,"i",39),g.qZA())}function se(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"tr"),g.TgZ(1,"td",24),g.TgZ(2,"div",25),g.TgZ(3,"div",26),g._UZ(4,"img",27),g.qZA(),g.TgZ(5,"div",28),g.TgZ(6,"p"),g.TgZ(7,"a",29),g._uU(8),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(9,"td",24),g.TgZ(10,"p"),g.TgZ(11,"a",30),g._uU(12),g.qZA(),g.qZA(),g.qZA(),g.TgZ(13,"td",24),g.TgZ(14,"p"),g._uU(15),g.qZA(),g.qZA(),g.TgZ(16,"td",24),g.TgZ(17,"p"),g.TgZ(18,"a",31),g._uU(19),g.qZA(),g.qZA(),g.qZA(),g.TgZ(20,"td"),g.TgZ(21,"div",32),g.TgZ(22,"button",33),g.NdJ("click",function(){var e=g.CHM(i).$implicit;return g.oxw().confirmBox("confirm",e)}),g._UZ(23,"i",34),g.qZA(),g._uU(24,"\xa0 "),g.TgZ(25,"button",35),g._UZ(26,"i",36),g.qZA(),g._uU(27,"\xa0 "),g.TgZ(28,"button",37),g.NdJ("click",function(){var e=g.CHM(i).$implicit;return g.oxw().confirmBox("delete",e)}),g.YNc(29,re,2,0,"span",38),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&e){var n=t.$implicit,r=g.oxw();g.xp6(4),g.s9C("src",r.apiurl+n.PICTURE,g.LSH),g.xp6(3),g.MGl("href","/profile/",n.USERNAME,"",g.LSH),g.xp6(1),g.AsE("",n.FIRST_NAME," ",n.LAST_NAME,""),g.xp6(3),g.MGl("title","ID: ",n.COMPANY_ID,""),g.xp6(1),g.Oqu(n.COMPANY_NAME),g.xp6(3),g.Oqu(n.PHONE),g.xp6(4),g.Oqu(n.USERNAME),g.xp6(6),g.MGl("routerLink","edit/",n.ID,""),g.xp6(3),g.Q6J("disabled",n.isDeleting),g.xp6(1),g.Q6J("ngIf",!n.isDeleting)}}var oe=function(e,t){return{itemsPerPage:e,currentPage:t}},ae=[{path:"user-management",component:$,children:[{path:"",component:function(){var t=function(){function t(i,n,r,s,o){e(this,t),this.usersService=i,this.rulesService=n,this.bpService=r,this.imageService=s,this.alertService=o,this.subs=new c.Y,this.users=null,this.rules=null,this.bp=null,this.p=1,this.count=10,this.countdata=null,this.apiurl=d.N.apiUrl+"/image/"}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.subs.add(this.usersService.getAll().pipe((0,l.P)()).subscribe(function(t){e.users=t,e.countdata=e.users.length})),this.subs.add(this.rulesService.getAll().pipe((0,l.P)()).subscribe(function(t){return e.rules=t})),this.subs.add(this.bpService.getAll().pipe((0,l.P)()).subscribe(function(t){return e.bp=t}))}},{key:"deleteUser",value:function(e){var t=this;this.alertService.loading();var i=this.users.find(function(t){return t.ID===e.ID});this.subs.add(this.usersService.delete(e.ID).pipe((0,l.P)()).subscribe(function(){i.isDeleting=!0,t.users=t.users.filter(function(t){return t.ID!==e.ID}),t.countdata=t.users.length,t.alertService.success(),t.subs.add(t.imageService.deleteImage(i.PICTURE).pipe((0,l.P)()).subscribe())},function(e){t.alertService.error(e)}))}},{key:"roleIdToName",value:function(e){var t;try{t=this.rules.find(function(t){return t.ROLE_ID==e}).ROLE_NAME}catch(i){}finally{return t}}},{key:"companyIdToName",value:function(e){var t;try{t=this.bp.find(function(t){return t.COMPANY_ID=e}).COMPANY_NAME}catch(i){}finally{return t}}},{key:"resendEmail",value:function(e){var t=this;e.PASSWORD=e.USERNAME,this.alertService.loading(),this.subs.add(this.usersService.resendemail(e).pipe((0,l.P)()).subscribe(function(){t.alertService.success()},function(e){t.alertService.error(e)}))}},{key:"confirmBox",value:function(e,t){var i=this;"delete"==e&&te().fire({title:"Are you sure want to delete?",text:t.USERNAME,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(function(e){e.value&&i.deleteUser(t)}),"confirm"==e&&te().fire({title:"Are you sure want to resend email?",text:"this action will reset password "+t.USERNAME,icon:"question",showCancelButton:!0,confirmButtonText:"Yes, send email!",cancelButtonText:"Cancel"}).then(function(e){e.value&&i.resendEmail(t)})}},{key:"ngOnDestroy",value:function(){this.subs.unsubscribe()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(g.Y36(f.x),g.Y36(Z.P),g.Y36(A.m),g.Y36(v.C),g.Y36(p.c9))},t.\u0275cmp=g.Xpm({type:t,selectors:[["ng-component"]],decls:54,vars:12,consts:[[1,"title","d-flex","align-items-center","flex-wrap","mb-30"],[1,"mr-40"],["routerLink","add",1,"main-btn","primary-btn","btn-hover","btn-sm"],[1,"lni","lni-plus","mr-5"],[1,"tables-wrapper"],[1,"row"],[1,"col-lg-12"],[1,"card-style","mb-30"],[1,"row","align-items-center"],[1,"col-md-6"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center","py-3"],[1,"left"],[1,"right"],[1,"table-search","d-flex"],["action","#"],["type","text","name","something","placeholder","Search...",3,"ngModel","ngModelChange"],[1,"lni","lni-search-alt"],[1,"table-wrapper","table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[1,"pt-10","d-flex","flex-wrap","justify-content-between"],[1,"text-sm","text-gray"],[1,"text-right"],[3,"pageChange"],[1,"min-width"],[1,"lead"],[1,"lead-image"],["alt","",3,"src"],[1,"lead-text"],[3,"href"],["data-toggle","tooltip",2,"cursor","pointer",3,"title"],["data-toggle","tooltip"],[1,"action"],[1,"text-primary",2,"cursor","pointer",3,"click"],[1,"lni","lni-reply"],[1,"text-primary",2,"cursor","pointer",3,"routerLink"],[1,"lni","lni-pencil-alt"],[1,"text-danger",3,"disabled","click"],[4,"ngIf"],[1,"lni","lni-trash-can"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g.TgZ(1,"h2",1),g._uU(2,"Users Management"),g.qZA(),g.TgZ(3,"button",2),g._UZ(4,"i",3),g._uU(5," New Users"),g.qZA(),g.qZA(),g.TgZ(6,"div",4),g.TgZ(7,"div",5),g.TgZ(8,"div",6),g.TgZ(9,"div",7),g.TgZ(10,"div",8),g._UZ(11,"div",9),g.qZA(),g.TgZ(12,"div",10),g.TgZ(13,"div",11),g.TgZ(14,"p"),g._uU(15,"Show "),g.TgZ(16,"span"),g._uU(17,"10"),g.qZA(),g._uU(18," entries"),g.qZA(),g.qZA(),g.TgZ(19,"div",12),g.TgZ(20,"div",13),g.TgZ(21,"form",14),g.TgZ(22,"input",15),g.NdJ("ngModelChange",function(e){return t.filterdata=e}),g.qZA(),g.TgZ(23,"button"),g._UZ(24,"i",16),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(25,"div",17),g.TgZ(26,"table",18),g.TgZ(27,"thead"),g.TgZ(28,"tr"),g.TgZ(29,"th"),g.TgZ(30,"h6"),g._uU(31,"Name"),g.qZA(),g.qZA(),g.TgZ(32,"th"),g.TgZ(33,"h6"),g._uU(34,"Company"),g.qZA(),g.qZA(),g.TgZ(35,"th"),g.TgZ(36,"h6"),g._uU(37,"Phone No"),g.qZA(),g.qZA(),g.TgZ(38,"th"),g.TgZ(39,"h6"),g._uU(40,"Email"),g.qZA(),g.qZA(),g.TgZ(41,"th"),g.TgZ(42,"h6"),g._uU(43,"Action"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(44,"tbody"),g.YNc(45,se,30,11,"tr",19),g.ALo(46,"paginate"),g.ALo(47,"filter"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(48,"div",20),g.TgZ(49,"div",11),g.TgZ(50,"p",21),g._uU(51),g.qZA(),g.qZA(),g.TgZ(52,"div",22),g.TgZ(53,"pagination-controls",23),g.NdJ("pageChange",function(e){return t.p=e}),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&e&&(g.xp6(22),g.Q6J("ngModel",t.filterdata),g.xp6(23),g.Q6J("ngForOf",g.xi3(46,3,g.xi3(47,6,t.users,t.filterdata),g.WLB(9,oe,t.count,t.p))),g.xp6(6),g.hij("Total ",t.countdata," users"))},directives:[u.rH,o._Y,o.JL,o.F,o.Fj,o.JJ,o.On,a.sg,ie.LS,a.O5],pipes:[ie._s,ne.Z],encapsulation:2}),t}()},{path:"add",component:X},{path:"edit/:id",component:X}]}],ue=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({imports:[[u.Bz.forChild(ae)],u.Bz]}),t}(),le=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({imports:[[a.ez,o.UX,ue,T.A0,o.u5,ie.JX,ne.h]]}),t}()}}])}();